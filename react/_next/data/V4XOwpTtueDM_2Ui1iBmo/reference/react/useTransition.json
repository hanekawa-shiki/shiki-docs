{"pageProps":{"content":"[[\"$r\",\"MaxWidth\",\"68\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ åœ¨ä¸é˜»å¡ UI çš„æƒ…å†µä¸‹æ›´æ–°çŠ¶æ€çš„ React Hookã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const [isPending, startTransition] = useTransition()\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"usetransition\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition()\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\"ï¼Œå°†æŸäº›çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useTransition } from 'react';\\r\\n\\r\\nfunction TabContainer() {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  // â€¦â€¦\\r\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"å‚è§ä¸‹æ–¹æ›´å¤šç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" ä¸éœ€è¦ä»»ä½•å‚æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" è¿”å›ä¸€ä¸ªç”±ä¸¤ä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\"ï¼Œå‘Šè¯‰ä½ æ˜¯å¦å­˜åœ¨å¾…å¤„ç†çš„ transitionã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#starttransition\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" å‡½æ•°\"]}],\"ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"starttransition\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" å‡½æ•° \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" è¿”å›çš„ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" å‡½æ•°å…è®¸ä½ å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6,8}\",\"children\":\"function TabContainer() {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  const [tab, setTab] = useState('about');\\r\\n\\r\\n  function selectTab(nextTab) {\\r\\n    startTransition(() => {\\r\\n      setTab(nextTab);\\r\\n    });\\r\\n  }\\r\\n  // â€¦â€¦\\r\\n}\\n\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"starttransition-parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä½œç”¨åŸŸï¼ˆscopeï¼‰ï¼šä¸€ä¸ªé€šè¿‡è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ª \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#setstate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°\"]}],\" æ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚React ä¼šç«‹å³ä¸å¸¦å‚æ•°åœ°è°ƒç”¨æ­¤å‡½æ•°ï¼Œå¹¶å°†åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"scope\"}],\" è°ƒç”¨æœŸé—´å°†æ‰€æœ‰åŒæ­¥å®‰æ’çš„çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionã€‚å®ƒä»¬å°†æ˜¯éé˜»å¡çš„ï¼Œå¹¶ä¸” \",[\"$r\",\"a\",null,{\"href\":\"#preventing-unwanted-loading-indicators\",\"children\":\"ä¸ä¼šæ˜¾ç¤ºä¸æƒ³è¦çš„åŠ è½½æŒ‡ç¤ºå™¨\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"starttransition-returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" ä¸è¿”å›ä»»ä½•å€¼ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"starttransition-caveats\",\"children\":\"æ³¨æ„ \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" æ˜¯ä¸€ä¸ª Hookï¼Œå› æ­¤åªèƒ½åœ¨ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook å†…éƒ¨è°ƒç”¨ã€‚å¦‚æœéœ€è¦åœ¨å…¶ä»–åœ°æ–¹å¯åŠ¨ transitionï¼ˆä¾‹å¦‚ä»æ•°æ®åº“ï¼‰ï¼Œè¯·è°ƒç”¨ç‹¬ç«‹çš„ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" å‡½æ•°ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åªæœ‰åœ¨å¯ä»¥è®¿é—®è¯¥çŠ¶æ€çš„ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°æ—¶ï¼Œæ‰èƒ½å°†å…¶å¯¹åº”çš„çŠ¶æ€æ›´æ–°åŒ…è£…ä¸º transitionã€‚å¦‚æœä½ æƒ³å¯ç”¨ transition ä»¥å“åº”æŸä¸ª prop æˆ–è‡ªå®šä¹‰ Hook å€¼ï¼Œè¯·å°è¯•ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥çš„ã€‚React ä¼šç«‹å³æ‰§è¡Œæ­¤å‡½æ•°ï¼Œå¹¶å°†åœ¨å…¶æ‰§è¡ŒæœŸé—´å‘ç”Ÿçš„æ‰€æœ‰çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionã€‚å¦‚æœåœ¨å…¶æ‰§è¡ŒæœŸé—´ï¼Œå°è¯•ç¨åæ‰§è¡ŒçŠ¶æ€æ›´æ–°ï¼ˆä¾‹å¦‚åœ¨ä¸€ä¸ªå®šæ—¶å™¨ä¸­æ‰§è¡ŒçŠ¶æ€æ›´æ–°ï¼‰ï¼Œè¿™äº›çŠ¶æ€æ›´æ–°ä¸ä¼šè¢«æ ‡è®°ä¸º transitionã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æ ‡è®°ä¸º transition çš„çŠ¶æ€æ›´æ–°å°†è¢«å…¶ä»–çŠ¶æ€æ›´æ–°æ‰“æ–­ã€‚ä¾‹å¦‚åœ¨ transition ä¸­æ›´æ–°å›¾è¡¨ç»„ä»¶ï¼Œå¹¶åœ¨å›¾è¡¨ç»„ä»¶ä»åœ¨é‡æ–°æ¸²æŸ“æ—¶ç»§ç»­åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ï¼ŒReact å°†é¦–å…ˆå¤„ç†è¾“å…¥æ¡†çš„æ›´æ–°ï¼Œä¹‹åå†é‡æ–°å¯åŠ¨å¯¹å›¾è¡¨ç»„ä»¶çš„æ¸²æŸ“å·¥ä½œã€‚\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"transition æ›´æ–°ä¸èƒ½ç”¨äºæ§åˆ¶æ–‡æœ¬è¾“å…¥ã€‚\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç›®å‰ï¼ŒReact ä¼šæ‰¹å¤„ç†å¤šä¸ªåŒæ—¶è¿›è¡Œçš„ transitionã€‚è¿™æ˜¯ä¸€ä¸ªé™åˆ¶ï¼Œå¯èƒ½ä¼šåœ¨æœªæ¥ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ç”¨æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"marking-a-state-update-as-a-non-blocking-transition\",\"children\":\"å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºéé˜»å¡çš„ transition \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" ä»¥å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºéé˜»å¡çš„ transitionã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 4, \\\"isPending\\\"], [2, 4, \\\"startTransition\\\"]]\",\"children\":\"import { useState, useTransition } from 'react';\\r\\n\\r\\nfunction TabContainer() {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  // â€¦â€¦\\r\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" è¿”å›ä¸€ä¸ªç”±ä¸¤ä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"isPending\"}]}],\"ï¼Œå‘Šè¯‰ä½ æ˜¯å¦å­˜åœ¨å¾…å¤„ç†çš„ transitionã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" å‡½æ•°\"]}],\"ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6,8}\",\"children\":\"function TabContainer() {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  const [tab, setTab] = useState('about');\\r\\n\\r\\n  function selectTab(nextTab) {\\r\\n    startTransition(() => {\\r\\n      setTab(nextTab);\\r\\n    });\\r\\n  }\\r\\n  // â€¦â€¦\\r\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"transition å¯ä»¥ä½¿ç”¨æˆ·ç•Œé¢çš„æ›´æ–°åœ¨æ…¢é€Ÿè®¾å¤‡ä¸Šä»ä¿æŒå“åº”æ€§ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"é€šè¿‡ transitionï¼ŒUI ä»å°†åœ¨é‡æ–°æ¸²æŸ“è¿‡ç¨‹ä¸­ä¿æŒå“åº”æ€§ã€‚ä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªé€‰é¡¹å¡ï¼Œä½†æ”¹å˜äº†ä¸»æ„å¹¶ç‚¹å‡»å¦ä¸€ä¸ªé€‰é¡¹å¡ï¼Œä»–ä»¬å¯ä»¥åœ¨ä¸ç­‰å¾…ç¬¬ä¸€ä¸ªé‡æ–°æ¸²æŸ“å®Œæˆçš„æƒ…å†µä¸‹å®Œæˆæ“ä½œã€‚\"}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"ä½¿ç”¨ useTransition ä¸å¸¸è§„çŠ¶æ€æ›´æ–°çš„åŒºåˆ«\",\"titleId\":\"examples\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"updating-the-current-tab-in-a-transition\",\"children\":\"åœ¨ transition ä¸­æ›´æ–°å½“å‰é€‰é¡¹å¡ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œâ€œæ–‡ç« â€é€‰é¡¹å¡è¢« \",[\"$r\",\"strong\",null,{\"children\":\"äººä¸ºåœ°å‡æ…¢\"}],\"ï¼Œä»¥ä¾¿è‡³å°‘éœ€è¦ä¸€ç§’é’Ÿæ‰èƒ½æ¸²æŸ“ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":\"ç‚¹å‡»â€œPostsâ€ï¼Œç„¶åç«‹å³ç‚¹å‡»â€œContactâ€ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¼šä¸­æ–­â€œPostsâ€çš„ç¼“æ…¢æ¸²æŸ“ï¼Œè€Œâ€œè”ç³»äººâ€é€‰é¡¹å¡å°†ä¼šç«‹å³æ˜¾ç¤ºã€‚å› ä¸ºæ­¤çŠ¶æ€æ›´æ–°è¢«æ ‡è®°ä¸º transitionï¼Œæ‰€ä»¥ç¼“æ…¢çš„é‡æ–°æ¸²æŸ“ä¸ä¼šå†»ç»“ç”¨æˆ·ç•Œé¢ã€‚\"}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useTransition } from 'react';\\r\\nimport TabButton from './TabButton.js';\\r\\nimport AboutTab from './AboutTab.js';\\r\\nimport PostsTab from './PostsTab.js';\\r\\nimport ContactTab from './ContactTab.js';\\r\\n\\r\\nexport default function TabContainer() {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  const [tab, setTab] = useState('about');\\r\\n\\r\\n  function selectTab(nextTab) {\\r\\n    startTransition(() => {\\r\\n      setTab(nextTab);\\r\\n    });\\r\\n  }\\r\\n\\r\\n  return (\\r\\n    <>\\r\\n      <TabButton\\r\\n        isActive={tab === 'about'}\\r\\n        onClick={() => selectTab('about')}\\r\\n      >\\r\\n        About\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'posts'}\\r\\n        onClick={() => selectTab('posts')}\\r\\n      >\\r\\n        Posts (slow)\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'contact'}\\r\\n        onClick={() => selectTab('contact')}\\r\\n      >\\r\\n        Contact\\r\\n      </TabButton>\\r\\n      <hr />\\r\\n      {tab === 'about' && <AboutTab />}\\r\\n      {tab === 'posts' && <PostsTab />}\\r\\n      {tab === 'contact' && <ContactTab />}\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js\",\"children\":\"import { useTransition } from 'react';\\r\\n\\r\\nexport default function TabButton({ children, isActive, onClick }) {\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      onClick();\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  )\\r\\n}\\r\\n\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js\",\"children\":\"export default function AboutTab() {\\r\\n  return (\\r\\n    <p>Welcome to my profile!</p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js\",\"children\":\"import { memo } from 'react';\\r\\n\\r\\nconst PostsTab = memo(function PostsTab() {\\r\\n  // æ‰“å°ä¸€æ¬¡ã€‚çœŸæ­£å˜æ…¢çš„åœ°æ–¹åœ¨ SlowPost å†…ã€‚\\r\\n  console.log('[ARTIFICIALLY SLOW] Rendering 500 <SlowPost />');\\r\\n\\r\\n  let items = [];\\r\\n  for (let i = 0; i < 500; i++) {\\r\\n    items.push(<SlowPost key={i} index={i} />);\\r\\n  }\\r\\n  return (\\r\\n    <ul className=\\\"items\\\">\\r\\n      {items}\\r\\n    </ul>\\r\\n  );\\r\\n});\\r\\n\\r\\nfunction SlowPost({ index }) {\\r\\n  let startTime = performance.now();\\r\\n  while (performance.now() - startTime < 1) {\\r\\n    // æ¯ä¸ª item éƒ½ç­‰å¾… 1 æ¯«ç§’ä»¥æ¨¡æ‹Ÿææ…¢çš„ä»£ç ã€‚\\r\\n  }\\r\\n\\r\\n  return (\\r\\n    <li className=\\\"item\\\">\\r\\n      Post #{index + 1}\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js\",\"children\":\"export default function ContactTab() {\\r\\n  return (\\r\\n    <>\\r\\n      <p>\\r\\n        You can find me online here:\\r\\n      </p>\\r\\n      <ul>\\r\\n        <li>admin@mysite.com</li>\\r\\n        <li>+123456789</li>\\r\\n      </ul>\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\r\\nb { display: inline-block; margin-right: 10px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"updating-the-current-tab-without-a-transition\",\"children\":\"åœ¨ä¸ä½¿ç”¨ transition çš„æƒ…å†µä¸‹æ›´æ–°å½“å‰é€‰é¡¹å¡ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œâ€œPostsâ€é€‰é¡¹å¡åŒæ ·è¢« \",[\"$r\",\"strong\",null,{\"children\":\"äººä¸ºåœ°å‡æ…¢\"}],\"ï¼Œä»¥ä¾¿è‡³å°‘éœ€è¦ä¸€ç§’é’Ÿæ‰èƒ½æ¸²æŸ“ã€‚ä¸ä¹‹å‰çš„ç¤ºä¾‹ä¸åŒï¼Œè¿™ä¸ªçŠ¶æ€æ›´æ–° \",[\"$r\",\"strong\",null,{\"children\":\"æ²¡æœ‰ä½¿ç”¨ transition\"}],\"ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"ç‚¹å‡»â€œPostsâ€ï¼Œç„¶åç«‹å³ç‚¹å‡»â€œContactâ€ã€‚è¯·æ³¨æ„ï¼Œåº”ç”¨ç¨‹åºåœ¨æ¸²æŸ“å‡é€Ÿé€‰é¡¹å¡æ—¶ä¼šå†»ç»“ï¼ŒUI å°†å˜å¾—æ— å“åº”ã€‚ç”±äºè¿™ä¸ªçŠ¶æ€æ›´æ–° \",[\"$r\",\"strong\",null,{\"children\":\"æ²¡æœ‰ä½¿ç”¨ transition\"}],\"ï¼Œæ‰€ä»¥æ…¢é€Ÿçš„é‡æ–°æ¸²æŸ“ä¼šå†»ç»“ç”¨æˆ·ç•Œé¢ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\r\\nimport TabButton from './TabButton.js';\\r\\nimport AboutTab from './AboutTab.js';\\r\\nimport PostsTab from './PostsTab.js';\\r\\nimport ContactTab from './ContactTab.js';\\r\\n\\r\\nexport default function TabContainer() {\\r\\n  const [tab, setTab] = useState('about');\\r\\n\\r\\n  function selectTab(nextTab) {\\r\\n    setTab(nextTab);\\r\\n  }\\r\\n\\r\\n  return (\\r\\n    <>\\r\\n      <TabButton\\r\\n        isActive={tab === 'about'}\\r\\n        onClick={() => selectTab('about')}\\r\\n      >\\r\\n        About\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'posts'}\\r\\n        onClick={() => selectTab('posts')}\\r\\n      >\\r\\n        Posts (slow)\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'contact'}\\r\\n        onClick={() => selectTab('contact')}\\r\\n      >\\r\\n        Contact\\r\\n      </TabButton>\\r\\n      <hr />\\r\\n      {tab === 'about' && <AboutTab />}\\r\\n      {tab === 'posts' && <PostsTab />}\\r\\n      {tab === 'contact' && <ContactTab />}\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js\",\"children\":\"import { useTransition } from 'react';\\r\\n\\r\\nexport default function TabButton({ children, isActive, onClick }) {\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      onClick();\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  )\\r\\n}\\r\\n\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js\",\"children\":\"export default function AboutTab() {\\r\\n  return (\\r\\n    <p>Welcome to my profile!</p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js\",\"children\":\"import { memo } from 'react';\\r\\n\\r\\nconst PostsTab = memo(function PostsTab() {\\r\\n  // æ‰“å°ä¸€æ¬¡ã€‚çœŸæ­£å˜æ…¢çš„åœ°æ–¹åœ¨ SlowPost å†…ã€‚\\r\\n  console.log('[ARTIFICIALLY SLOW] Rendering 500 <SlowPost />');\\r\\n\\r\\n  let items = [];\\r\\n  for (let i = 0; i < 500; i++) {\\r\\n    items.push(<SlowPost key={i} index={i} />);\\r\\n  }\\r\\n  return (\\r\\n    <ul className=\\\"items\\\">\\r\\n      {items}\\r\\n    </ul>\\r\\n  );\\r\\n});\\r\\n\\r\\nfunction SlowPost({ index }) {\\r\\n  let startTime = performance.now();\\r\\n  while (performance.now() - startTime < 1) {\\r\\n    // æ¯ä¸ª item éƒ½ç­‰å¾… 1 æ¯«ç§’ä»¥æ¨¡æ‹Ÿææ…¢çš„ä»£ç ã€‚\\r\\n  }\\r\\n\\r\\n  return (\\r\\n    <li className=\\\"item\\\">\\r\\n      Post #{index + 1}\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js\",\"children\":\"export default function ContactTab() {\\r\\n  return (\\r\\n    <>\\r\\n      <p>\\r\\n        You can find me online here:\\r\\n      </p>\\r\\n      <ul>\\r\\n        <li>admin@mysite.com</li>\\r\\n        <li>+123456789</li>\\r\\n      </ul>\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\r\\nb { display: inline-block; margin-right: 10px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"80\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-the-parent-component-in-a-transition\",\"children\":\"åœ¨ transition ä¸­æ›´æ–°çˆ¶ç»„ä»¶ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" ä»¥æ›´æ–°çˆ¶ç»„ä»¶çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"TabButton\"}],\" ç»„ä»¶åœ¨ transition ä¸­åŒ…è£…äº† \",[\"$r\",\"code\",null,{\"children\":\"onClick\"}],\" é€»è¾‘ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{8-10}\",\"children\":\"export default function TabButton({ children, isActive, onClick }) {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      startTransition(() => {\\r\\n        onClick();\\r\\n      });\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç”±äºçˆ¶ç»„ä»¶çš„çŠ¶æ€æ›´æ–°åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"onClick\"}],\" äº‹ä»¶å¤„ç†ç¨‹åºå†…ï¼Œæ‰€ä»¥è¯¥çŠ¶æ€æ›´æ–°ä¼šè¢«æ ‡è®°ä¸º transitionã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥åœ¨ç‚¹å‡»â€œPostsâ€åç«‹å³ç‚¹å‡»â€œContactâ€ã€‚ç”±äºæ›´æ–°é€‰å®šé€‰é¡¹å¡è¢«æ ‡è®°ä¸ºäº† transitionï¼Œå› æ­¤å®ƒä¸ä¼šé˜»æ­¢ç”¨æˆ·äº¤äº’ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\r\\nimport TabButton from './TabButton.js';\\r\\nimport AboutTab from './AboutTab.js';\\r\\nimport PostsTab from './PostsTab.js';\\r\\nimport ContactTab from './ContactTab.js';\\r\\n\\r\\nexport default function TabContainer() {\\r\\n  const [tab, setTab] = useState('about');\\r\\n  return (\\r\\n    <>\\r\\n      <TabButton\\r\\n        isActive={tab === 'about'}\\r\\n        onClick={() => setTab('about')}\\r\\n      >\\r\\n        About\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'posts'}\\r\\n        onClick={() => setTab('posts')}\\r\\n      >\\r\\n        Posts (slow)\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'contact'}\\r\\n        onClick={() => setTab('contact')}\\r\\n      >\\r\\n        Contact\\r\\n      </TabButton>\\r\\n      <hr />\\r\\n      {tab === 'about' && <AboutTab />}\\r\\n      {tab === 'posts' && <PostsTab />}\\r\\n      {tab === 'contact' && <ContactTab />}\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js active\",\"children\":\"import { useTransition } from 'react';\\r\\n\\r\\nexport default function TabButton({ children, isActive, onClick }) {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      startTransition(() => {\\r\\n        onClick();\\r\\n      });\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js\",\"children\":\"export default function AboutTab() {\\r\\n  return (\\r\\n    <p>Welcome to my profile!</p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js\",\"children\":\"import { memo } from 'react';\\r\\n\\r\\nconst PostsTab = memo(function PostsTab() {\\r\\n  // æ‰“å°ä¸€æ¬¡ã€‚çœŸæ­£å˜æ…¢çš„åœ°æ–¹åœ¨ SlowPost å†…ã€‚\\r\\n  console.log('[ARTIFICIALLY SLOW] Rendering 500 <SlowPost />');\\r\\n\\r\\n  let items = [];\\r\\n  for (let i = 0; i < 500; i++) {\\r\\n    items.push(<SlowPost key={i} index={i} />);\\r\\n  }\\r\\n  return (\\r\\n    <ul className=\\\"items\\\">\\r\\n      {items}\\r\\n    </ul>\\r\\n  );\\r\\n});\\r\\n\\r\\nfunction SlowPost({ index }) {\\r\\n  let startTime = performance.now();\\r\\n  while (performance.now() - startTime < 1) {\\r\\n    // æ¯ä¸ª item éƒ½ç­‰å¾… 1 æ¯«ç§’ä»¥æ¨¡æ‹Ÿææ…¢çš„ä»£ç ã€‚\\r\\n  }\\r\\n\\r\\n  return (\\r\\n    <li className=\\\"item\\\">\\r\\n      Post #{index + 1}\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js\",\"children\":\"export default function ContactTab() {\\r\\n  return (\\r\\n    <>\\r\\n      <p>\\r\\n        You can find me online here:\\r\\n      </p>\\r\\n      <ul>\\r\\n        <li>admin@mysite.com</li>\\r\\n        <li>+123456789</li>\\r\\n      </ul>\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\r\\nb { display: inline-block; margin-right: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"92\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-a-pending-visual-state-during-the-transition\",\"children\":\"åœ¨ transition æœŸé—´æ˜¾ç¤ºå¾…å¤„ç†çš„è§†è§‰çŠ¶æ€ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ å¯ä»¥ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" è¿”å›çš„ \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" å¸ƒå°”å€¼æ¥å‘ç”¨æˆ·è¡¨æ˜å½“å‰å¤„äº transition ä¸­ã€‚ä¾‹å¦‚ï¼Œé€‰é¡¹å¡æŒ‰é’®å¯ä»¥æœ‰ä¸€ä¸ªç‰¹æ®Šçš„â€œpendingâ€è§†è§‰çŠ¶æ€ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-6}\",\"children\":\"function TabButton({ children, isActive, onClick }) {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  // ...\\r\\n  if (isPending) {\\r\\n    return <b className=\\\"pending\\\">{children}</b>;\\r\\n  }\\r\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¯·æ³¨æ„ï¼Œç°åœ¨ç‚¹å‡»â€œPostsâ€æ„Ÿè§‰æ›´åŠ çµæ•ï¼Œå› ä¸ºé€‰é¡¹å¡æŒ‰é’®æœ¬èº«ç«‹å³æ›´æ–°äº†ï¼š\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\r\\nimport TabButton from './TabButton.js';\\r\\nimport AboutTab from './AboutTab.js';\\r\\nimport PostsTab from './PostsTab.js';\\r\\nimport ContactTab from './ContactTab.js';\\r\\n\\r\\nexport default function TabContainer() {\\r\\n  const [tab, setTab] = useState('about');\\r\\n  return (\\r\\n    <>\\r\\n      <TabButton\\r\\n        isActive={tab === 'about'}\\r\\n        onClick={() => setTab('about')}\\r\\n      >\\r\\n        About\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'posts'}\\r\\n        onClick={() => setTab('posts')}\\r\\n      >\\r\\n        Posts (slow)\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'contact'}\\r\\n        onClick={() => setTab('contact')}\\r\\n      >\\r\\n        Contact\\r\\n      </TabButton>\\r\\n      <hr />\\r\\n      {tab === 'about' && <AboutTab />}\\r\\n      {tab === 'posts' && <PostsTab />}\\r\\n      {tab === 'contact' && <ContactTab />}\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js active\",\"children\":\"import { useTransition } from 'react';\\r\\n\\r\\nexport default function TabButton({ children, isActive, onClick }) {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  if (isPending) {\\r\\n    return <b className=\\\"pending\\\">{children}</b>;\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      startTransition(() => {\\r\\n        onClick();\\r\\n      });\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js\",\"children\":\"export default function AboutTab() {\\r\\n  return (\\r\\n    <p>Welcome to my profile!</p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js\",\"children\":\"import { memo } from 'react';\\r\\n\\r\\nconst PostsTab = memo(function PostsTab() {\\r\\n  // æ‰“å°ä¸€æ¬¡ã€‚çœŸæ­£å˜æ…¢çš„åœ°æ–¹åœ¨ SlowPost å†…ã€‚\\r\\n  console.log('[ARTIFICIALLY SLOW] Rendering 500 <SlowPost />');\\r\\n\\r\\n  let items = [];\\r\\n  for (let i = 0; i < 500; i++) {\\r\\n    items.push(<SlowPost key={i} index={i} />);\\r\\n  }\\r\\n  return (\\r\\n    <ul className=\\\"items\\\">\\r\\n      {items}\\r\\n    </ul>\\r\\n  );\\r\\n});\\r\\n\\r\\nfunction SlowPost({ index }) {\\r\\n  let startTime = performance.now();\\r\\n  while (performance.now() - startTime < 1) {\\r\\n    // æ¯ä¸ª item éƒ½ç­‰å¾… 1 æ¯«ç§’ä»¥æ¨¡æ‹Ÿææ…¢çš„ä»£ç ã€‚\\r\\n  }\\r\\n\\r\\n  return (\\r\\n    <li className=\\\"item\\\">\\r\\n      Post #{index + 1}\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default PostsTab;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js\",\"children\":\"export default function ContactTab() {\\r\\n  return (\\r\\n    <>\\r\\n      <p>\\r\\n        You can find me online here:\\r\\n      </p>\\r\\n      <ul>\\r\\n        <li>admin@mysite.com</li>\\r\\n        <li>+123456789</li>\\r\\n      </ul>\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\r\\nb { display: inline-block; margin-right: 10px; }\\r\\n.pending { color: #777; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"100\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preventing-unwanted-loading-indicators\",\"children\":\"é¿å…ä¸å¿…è¦çš„åŠ è½½æŒ‡ç¤ºå™¨ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"PostsTab\"}],\" ç»„ä»¶ä»å¯ç”¨äº† \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":\"Suspense\"}],\" çš„æ•°æ®æºä¸­è·å–äº†ä¸€äº›æ•°æ®ã€‚å½“ä½ ç‚¹å‡»â€œPostsâ€é€‰é¡¹å¡æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"PostsTab\"}],\" ç»„ä»¶å°† \",[\"$r\",\"strong\",null,{\"children\":\"æŒ‚èµ·\"}],\"ï¼Œå¯¼è‡´æœ€è¿‘çš„åŠ è½½ä¸­çš„åå¤‡æ–¹æ¡ˆå‡ºç°ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { Suspense, useState } from 'react';\\r\\nimport TabButton from './TabButton.js';\\r\\nimport AboutTab from './AboutTab.js';\\r\\nimport PostsTab from './PostsTab.js';\\r\\nimport ContactTab from './ContactTab.js';\\r\\n\\r\\nexport default function TabContainer() {\\r\\n  const [tab, setTab] = useState('about');\\r\\n  return (\\r\\n    <Suspense fallback={<h1>ğŸŒ€ Loading...</h1>}>\\r\\n      <TabButton\\r\\n        isActive={tab === 'about'}\\r\\n        onClick={() => setTab('about')}\\r\\n      >\\r\\n        About\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'posts'}\\r\\n        onClick={() => setTab('posts')}\\r\\n      >\\r\\n        Posts\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'contact'}\\r\\n        onClick={() => setTab('contact')}\\r\\n      >\\r\\n        Contact\\r\\n      </TabButton>\\r\\n      <hr />\\r\\n      {tab === 'about' && <AboutTab />}\\r\\n      {tab === 'posts' && <PostsTab />}\\r\\n      {tab === 'contact' && <ContactTab />}\\r\\n    </Suspense>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js\",\"children\":\"export default function TabButton({ children, isActive, onClick }) {\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      onClick();\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js hidden\",\"children\":\"export default function AboutTab() {\\r\\n  return (\\r\\n    <p>Welcome to my profile!</p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js hidden\",\"children\":\"import { fetchData } from './data.js';\\r\\n\\r\\n// æ³¨æ„ï¼šæ­¤ç»„ä»¶ä½¿ç”¨äº†å®éªŒæ€§ API ç¼–å†™\\r\\n// è¿™åœ¨ React ç¨³å®šç‰ˆæœ¬ä¸­æ— æ³•è®¿é—®\\r\\n\\r\\n// åœ¨å®é™…çš„ä¾‹å­ä¸­ï¼Œè¯•è¯•\\r\\n// åƒ Relay æˆ– Next.js ä¸€æ ·é›†æˆäº† Suspense çš„æ¡†æ¶ã€‚\\r\\n\\r\\nfunction PostsTab() {\\r\\n  const posts = use(fetchData('/posts'));\\r\\n  return (\\r\\n    <ul className=\\\"items\\\">\\r\\n      {posts.map(post =>\\r\\n        <Post key={post.id} title={post.title} />\\r\\n      )}\\r\\n    </ul>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Post({ title }) {\\r\\n  return (\\r\\n    <li className=\\\"item\\\">\\r\\n      {title}\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default PostsTab;\\r\\n\\r\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³æ¼”ç¤ºè¿è¡Œé—®é¢˜çš„ä¸´æ—¶æ–¹æ³•ã€‚\\r\\n// TODO: å½“ bug ä¿®å¤åä½¿ç”¨çœŸå®çš„å®ç°æ›¿ä»£æ­¤å¤„ã€‚\\r\\nfunction use(promise) {\\r\\n  if (promise.status === 'fulfilled') {\\r\\n    return promise.value;\\r\\n  } else if (promise.status === 'rejected') {\\r\\n    throw promise.reason;\\r\\n  } else if (promise.status === 'pending') {\\r\\n    throw promise;\\r\\n  } else {\\r\\n    promise.status = 'pending';\\r\\n    promise.then(\\r\\n      result => {\\r\\n        promise.status = 'fulfilled';\\r\\n        promise.value = result;\\r\\n      },\\r\\n      reason => {\\r\\n        promise.status = 'rejected';\\r\\n        promise.reason = reason;\\r\\n      },\\r\\n    );\\r\\n    throw promise;\\r\\n  }\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js hidden\",\"children\":\"export default function ContactTab() {\\r\\n  return (\\r\\n    <>\\r\\n      <p>\\r\\n        You can find me online here:\\r\\n      </p>\\r\\n      <ul>\\r\\n        <li>admin@mysite.com</li>\\r\\n        <li>+123456789</li>\\r\\n      </ul>\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\r\\n// ä¸ Suspense ä¸€åŒä½¿ç”¨çš„æ¡†æ¶\\r\\n// é€šå¸¸ç¼“å­˜é€»è¾‘æ˜¯ç”±æ¡†æ¶å†…éƒ¨å¤„ç†çš„ã€‚\\r\\n\\r\\nlet cache = new Map();\\r\\n\\r\\nexport function fetchData(url) {\\r\\n  if (!cache.has(url)) {\\r\\n    cache.set(url, getData(url));\\r\\n  }\\r\\n  return cache.get(url);\\r\\n}\\r\\n\\r\\nasync function getData(url) {\\r\\n  if (url.startsWith('/posts')) {\\r\\n    return await getPosts();\\r\\n  } else {\\r\\n    throw Error('Not implemented');\\r\\n  }\\r\\n}\\r\\n\\r\\nasync function getPosts() {\\r\\n  // Add a fake delay to make waiting noticeable.\\r\\n  await new Promise(resolve => {\\r\\n    setTimeout(resolve, 1000);\\r\\n  });\\r\\n  let posts = [];\\r\\n  for (let i = 0; i < 500; i++) {\\r\\n    posts.push({\\r\\n      id: i,\\r\\n      title: 'Post #' + (i + 1)\\r\\n    });\\r\\n  }\\r\\n  return posts;\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\r\\nb { display: inline-block; margin-right: 10px; }\\r\\n.pending { color: #777; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"106\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"éšè—æ•´ä¸ªé€‰é¡¹å¡å®¹å™¨ä»¥æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºç¬¦ä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸è¿è´¯ã€‚å¦‚æœä½ å°† \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" æ·»åŠ åˆ° \",[\"$r\",\"code\",null,{\"children\":\"TabButton\"}],\" ä¸­ï¼Œä½ å¯ä»¥æ”¹ä¸ºåœ¨é€‰é¡¹å¡æŒ‰é’®ä¸­æŒ‡ç¤ºå¾…å¤„ç†çŠ¶æ€ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¯·æ³¨æ„ï¼Œç°åœ¨ç‚¹å‡»â€œå¸–å­â€ä¸å†ç”¨ä¸€ä¸ªæ—‹è½¬å™¨æ›¿æ¢æ•´ä¸ªé€‰é¡¹å¡å®¹å™¨ï¼š\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { Suspense, useState } from 'react';\\r\\nimport TabButton from './TabButton.js';\\r\\nimport AboutTab from './AboutTab.js';\\r\\nimport PostsTab from './PostsTab.js';\\r\\nimport ContactTab from './ContactTab.js';\\r\\n\\r\\nexport default function TabContainer() {\\r\\n  const [tab, setTab] = useState('about');\\r\\n  return (\\r\\n    <Suspense fallback={<h1>ğŸŒ€ Loading...</h1>}>\\r\\n      <TabButton\\r\\n        isActive={tab === 'about'}\\r\\n        onClick={() => setTab('about')}\\r\\n      >\\r\\n        About\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'posts'}\\r\\n        onClick={() => setTab('posts')}\\r\\n      >\\r\\n        Posts\\r\\n      </TabButton>\\r\\n      <TabButton\\r\\n        isActive={tab === 'contact'}\\r\\n        onClick={() => setTab('contact')}\\r\\n      >\\r\\n        Contact\\r\\n      </TabButton>\\r\\n      <hr />\\r\\n      {tab === 'about' && <AboutTab />}\\r\\n      {tab === 'posts' && <PostsTab />}\\r\\n      {tab === 'contact' && <ContactTab />}\\r\\n    </Suspense>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TabButton.js active\",\"children\":\"import { useTransition } from 'react';\\r\\n\\r\\nexport default function TabButton({ children, isActive, onClick }) {\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n  if (isActive) {\\r\\n    return <b>{children}</b>\\r\\n  }\\r\\n  if (isPending) {\\r\\n    return <b className=\\\"pending\\\">{children}</b>;\\r\\n  }\\r\\n  return (\\r\\n    <button onClick={() => {\\r\\n      startTransition(() => {\\r\\n        onClick();\\r\\n      });\\r\\n    }}>\\r\\n      {children}\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AboutTab.js hidden\",\"children\":\"export default function AboutTab() {\\r\\n  return (\\r\\n    <p>Welcome to my profile!</p>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/PostsTab.js hidden\",\"children\":\"import { fetchData } from './data.js';\\r\\n\\r\\n// æ³¨æ„ï¼šæ­¤ç»„ä»¶ä½¿ç”¨äº†å®éªŒæ€§ API ç¼–å†™\\r\\n// è¿™åœ¨ React ç¨³å®šç‰ˆæœ¬ä¸­æ— æ³•è®¿é—®\\r\\n\\r\\n// åœ¨å®é™…çš„ä¾‹å­ä¸­ï¼Œè¯•è¯•\\r\\n// åƒ Relay æˆ– Next.js ä¸€æ ·é›†æˆäº† Suspense çš„æ¡†æ¶ã€‚\\r\\n\\r\\nfunction PostsTab() {\\r\\n  const posts = use(fetchData('/posts'));\\r\\n  return (\\r\\n    <ul className=\\\"items\\\">\\r\\n      {posts.map(post =>\\r\\n        <Post key={post.id} title={post.title} />\\r\\n      )}\\r\\n    </ul>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Post({ title }) {\\r\\n  return (\\r\\n    <li className=\\\"item\\\">\\r\\n      {title}\\r\\n    </li>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default PostsTab;\\r\\n\\r\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³æ¼”ç¤ºè¿è¡Œé—®é¢˜çš„ä¸´æ—¶æ–¹æ³•ã€‚\\r\\n// TODO: å½“ bug ä¿®å¤åä½¿ç”¨çœŸå®çš„å®ç°æ›¿ä»£æ­¤å¤„ã€‚\\r\\nfunction use(promise) {\\r\\n  if (promise.status === 'fulfilled') {\\r\\n    return promise.value;\\r\\n  } else if (promise.status === 'rejected') {\\r\\n    throw promise.reason;\\r\\n  } else if (promise.status === 'pending') {\\r\\n    throw promise;\\r\\n  } else {\\r\\n    promise.status = 'pending';\\r\\n    promise.then(\\r\\n      result => {\\r\\n        promise.status = 'fulfilled';\\r\\n        promise.value = result;\\r\\n      },\\r\\n      reason => {\\r\\n        promise.status = 'rejected';\\r\\n        promise.reason = reason;\\r\\n      },\\r\\n    );\\r\\n    throw promise;\\r\\n  }\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ContactTab.js hidden\",\"children\":\"export default function ContactTab() {\\r\\n  return (\\r\\n    <>\\r\\n      <p>\\r\\n        You can find me online here:\\r\\n      </p>\\r\\n      <ul>\\r\\n        <li>admin@mysite.com</li>\\r\\n        <li>+123456789</li>\\r\\n      </ul>\\r\\n    </>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\r\\n// å–å†³äºä¸ Suspense ä¸€åŒä½¿ç”¨çš„æ¡†æ¶\\r\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåµŒå…¥åœ¨æ¡†æ¶å†…éƒ¨ã€‚\\r\\n\\r\\nlet cache = new Map();\\r\\n\\r\\nexport function fetchData(url) {\\r\\n  if (!cache.has(url)) {\\r\\n    cache.set(url, getData(url));\\r\\n  }\\r\\n  return cache.get(url);\\r\\n}\\r\\n\\r\\nasync function getData(url) {\\r\\n  if (url.startsWith('/posts')) {\\r\\n    return await getPosts();\\r\\n  } else {\\r\\n    throw Error('Not implemented');\\r\\n  }\\r\\n}\\r\\n\\r\\nasync function getPosts() {\\r\\n  // Add a fake delay to make waiting noticeable.\\r\\n  await new Promise(resolve => {\\r\\n    setTimeout(resolve, 1000);\\r\\n  });\\r\\n  let posts = [];\\r\\n  for (let i = 0; i < 500; i++) {\\r\\n    posts.push({\\r\\n      id: i,\\r\\n      title: 'Post #' + (i + 1)\\r\\n    });\\r\\n  }\\r\\n  return posts;\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-right: 10px }\\r\\nb { display: inline-block; margin-right: 10px; }\\r\\n.pending { color: #777; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"126\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense#preventing-already-revealed-content-from-hiding\",\"children\":\"äº†è§£æœ‰å…³åœ¨Suspenseä¸­ä½¿ç”¨è½¬æ¢çš„æ›´å¤šä¿¡æ¯\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"è½¬æ¢æ•ˆæœåªä¼šâ€œç­‰å¾…â€è¶³å¤Ÿé•¿çš„æ—¶é—´æ¥é¿å…éšè— \",[\"$r\",\"strong\",null,{\"children\":\"å·²ç»æ˜¾ç¤º\"}],\" çš„å†…å®¹ï¼ˆä¾‹å¦‚é€‰é¡¹å¡å®¹å™¨ï¼‰ã€‚å¦‚æœâ€œå¸–å­â€é€‰é¡¹å¡å…·æœ‰ä¸€ä¸ª\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense#revealing-nested-content-as-it-loads\",\"children\":[\"åµŒå¥— \",[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" è¾¹ç•Œ\"]}],\"ï¼Œè½¬æ¢æ•ˆæœå°†ä¸ä¼šâ€œç­‰å¾…â€å®ƒã€‚\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"building-a-suspense-enabled-router\",\"children\":\"æ„å»ºä¸€ä¸ªSuspense-enabled çš„è·¯ç”± \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ª React æ¡†æ¶æˆ–è·¯ç”±ï¼Œæˆ‘ä»¬å»ºè®®å°†é¡µé¢å¯¼èˆªæ ‡è®°ä¸ºè½¬æ¢æ•ˆæœã€‚\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,6,8}\",\"children\":\"function Router() {\\r\\n  const [page, setPage] = useState('/');\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n\\r\\n  function navigate(url) {\\r\\n    startTransition(() => {\\r\\n      setPage(url);\\r\\n    });\\r\\n  }\\r\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¿™ä¹ˆåšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#marking-a-state-update-as-a-non-blocking-transition\",\"children\":\"è½¬æ¢æ•ˆæœæ˜¯å¯ä¸­æ–­çš„\"}],\"ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥åœ¨ç­‰å¾…é‡æ–°æ¸²æŸ“å®Œæˆä¹‹å‰ç‚¹å‡»å…¶ä»–åœ°æ–¹ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#preventing-unwanted-loading-indicators\",\"children\":\"è½¬æ¢æ•ˆæœå¯ä»¥é˜²æ­¢ä¸å¿…è¦çš„åŠ è½½æŒ‡ç¤ºç¬¦\"}],\"ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥é¿å…åœ¨å¯¼èˆªæ—¶äº§ç”Ÿä¸åè°ƒçš„è·³è½¬ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨è½¬æ¢æ•ˆæœè¿›è¡Œé¡µé¢å¯¼èˆªçš„è·¯ç”±å™¨ç¤ºä¾‹ï¼š\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\r\\n  \\\"dependencies\\\": {\\r\\n    \\\"react\\\": \\\"experimental\\\",\\r\\n    \\\"react-dom\\\": \\\"experimental\\\"\\r\\n  },\\r\\n  \\\"scripts\\\": {\\r\\n    \\\"start\\\": \\\"react-scripts start\\\",\\r\\n    \\\"build\\\": \\\"react-scripts build\\\",\\r\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\r\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\r\\n  }\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, useState, useTransition } from 'react';\\r\\nimport IndexPage from './IndexPage.js';\\r\\nimport ArtistPage from './ArtistPage.js';\\r\\nimport Layout from './Layout.js';\\r\\n\\r\\nexport default function App() {\\r\\n  return (\\r\\n    <Suspense fallback={<BigSpinner />}>\\r\\n      <Router />\\r\\n    </Suspense>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction Router() {\\r\\n  const [page, setPage] = useState('/');\\r\\n  const [isPending, startTransition] = useTransition();\\r\\n\\r\\n  function navigate(url) {\\r\\n    startTransition(() => {\\r\\n      setPage(url);\\r\\n    });\\r\\n  }\\r\\n\\r\\n  let content;\\r\\n  if (page === '/') {\\r\\n    content = (\\r\\n      <IndexPage navigate={navigate} />\\r\\n    );\\r\\n  } else if (page === '/the-beatles') {\\r\\n    content = (\\r\\n      <ArtistPage\\r\\n        artist={{\\r\\n          id: 'the-beatles',\\r\\n          name: 'The Beatles',\\r\\n        }}\\r\\n      />\\r\\n    );\\r\\n  }\\r\\n  return (\\r\\n    <Layout isPending={isPending}>\\r\\n      {content}\\r\\n    </Layout>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction BigSpinner() {\\r\\n  return <h2>ğŸŒ€ Loading...</h2>;\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Layout.js\",\"children\":\"export default function Layout({ children, isPending }) {\\r\\n  return (\\r\\n    <div className=\\\"layout\\\">\\r\\n      <section className=\\\"header\\\" style={{\\r\\n        opacity: isPending ? 0.7 : 1\\r\\n      }}>\\r\\n        Music Browser\\r\\n      </section>\\r\\n      <main>\\r\\n        {children}\\r\\n      </main>\\r\\n    </div>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/IndexPage.js\",\"children\":\"export default function IndexPage({ navigate }) {\\r\\n  return (\\r\\n    <button onClick={() => navigate('/the-beatles')}>\\r\\n      Open The Beatles artist page\\r\\n    </button>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js\",\"children\":\"import { Suspense } from 'react';\\r\\nimport Albums from './Albums.js';\\r\\nimport Biography from './Biography.js';\\r\\nimport Panel from './Panel.js';\\r\\n\\r\\nexport default function ArtistPage({ artist }) {\\r\\n  return (\\r\\n    <>\\r\\n      <h1>{artist.name}</h1>\\r\\n      <Biography artistId={artist.id} />\\r\\n      <Suspense fallback={<AlbumsGlimmer />}>\\r\\n        <Panel>\\r\\n          <Albums artistId={artist.id} />\\r\\n        </Panel>\\r\\n      </Suspense>\\r\\n    </>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction AlbumsGlimmer() {\\r\\n  return (\\r\\n    <div className=\\\"glimmer-panel\\\">\\r\\n      <div className=\\\"glimmer-line\\\" />\\r\\n      <div className=\\\"glimmer-line\\\" />\\r\\n      <div className=\\\"glimmer-line\\\" />\\r\\n    </div>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\r\\n\\r\\n// æ³¨æ„ï¼šæ­¤ç»„ä»¶ä½¿ç”¨äº†å®éªŒæ€§ API ç¼–å†™\\r\\n// è¿™åœ¨ React ç¨³å®šç‰ˆæœ¬ä¸­æ— æ³•è®¿é—®\\r\\n\\r\\n// åœ¨å®é™…çš„ä¾‹å­ä¸­ï¼Œè¯•è¯•\\r\\n// åƒ Relay æˆ– Next.js ä¸€æ ·é›†æˆäº† Suspense çš„æ¡†æ¶ã€‚\\r\\n\\r\\nexport default function Albums({ artistId }) {\\r\\n  const albums = use(fetchData(`/${artistId}/albums`));\\r\\n  return (\\r\\n    <ul>\\r\\n      {albums.map(album => (\\r\\n        <li key={album.id}>\\r\\n          {album.title} ({album.year})\\r\\n        </li>\\r\\n      ))}\\r\\n    </ul>\\r\\n  );\\r\\n}\\r\\n\\r\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³æ¼”ç¤ºè¿è¡Œé—®é¢˜çš„ä¸´æ—¶æ–¹æ³•ã€‚\\r\\n// TODO: å½“ bug ä¿®å¤åä½¿ç”¨çœŸå®çš„å®ç°æ›¿ä»£æ­¤å¤„ã€‚\\r\\nfunction use(promise) {\\r\\n  if (promise.status === 'fulfilled') {\\r\\n    return promise.value;\\r\\n  } else if (promise.status === 'rejected') {\\r\\n    throw promise.reason;\\r\\n  } else if (promise.status === 'pending') {\\r\\n    throw promise;\\r\\n  } else {\\r\\n    promise.status = 'pending';\\r\\n    promise.then(\\r\\n      result => {\\r\\n        promise.status = 'fulfilled';\\r\\n        promise.value = result;\\r\\n      },\\r\\n      reason => {\\r\\n        promise.status = 'rejected';\\r\\n        promise.reason = reason;\\r\\n      },\\r\\n    );\\r\\n    throw promise;\\r\\n  }\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js hidden\",\"children\":\"import { fetchData } from './data.js';\\r\\n\\r\\n// æ³¨æ„ï¼šæ­¤ç»„ä»¶ä½¿ç”¨äº†å®éªŒæ€§ API ç¼–å†™\\r\\n// è¿™åœ¨ React ç¨³å®šç‰ˆæœ¬ä¸­æ— æ³•è®¿é—®\\r\\n\\r\\n// åœ¨å®é™…çš„ä¾‹å­ä¸­ï¼Œè¯•è¯•\\r\\n// åƒ Relay æˆ– Next.js ä¸€æ ·é›†æˆäº† Suspense çš„æ¡†æ¶ã€‚\\r\\n\\r\\nexport default function Biography({ artistId }) {\\r\\n  const bio = use(fetchData(`/${artistId}/bio`));\\r\\n  return (\\r\\n    <section>\\r\\n      <p className=\\\"bio\\\">{bio}</p>\\r\\n    </section>\\r\\n  );\\r\\n}\\r\\n\\r\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³æ¼”ç¤ºè¿è¡Œé—®é¢˜çš„ä¸´æ—¶æ–¹æ³•ã€‚\\r\\n// TODO: å½“ bug ä¿®å¤åä½¿ç”¨çœŸå®çš„å®ç°æ›¿ä»£æ­¤å¤„ã€‚\\r\\nfunction use(promise) {\\r\\n  if (promise.status === 'fulfilled') {\\r\\n    return promise.value;\\r\\n  } else if (promise.status === 'rejected') {\\r\\n    throw promise.reason;\\r\\n  } else if (promise.status === 'pending') {\\r\\n    throw promise;\\r\\n  } else {\\r\\n    promise.status = 'pending';\\r\\n    promise.then(\\r\\n      result => {\\r\\n        promise.status = 'fulfilled';\\r\\n        promise.value = result;\\r\\n      },\\r\\n      reason => {\\r\\n        promise.status = 'rejected';\\r\\n        promise.reason = reason;\\r\\n      },\\r\\n    );\\r\\n    throw promise;\\r\\n  }\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js hidden\",\"children\":\"export default function Panel({ children }) {\\r\\n  return (\\r\\n    <section className=\\\"panel\\\">\\r\\n      {children}\\r\\n    </section>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\r\\n// å–å†³äºä¸ Suspense ä¸€åŒä½¿ç”¨çš„æ¡†æ¶\\r\\n// é€šå¸¸ç¼“å­˜é€»è¾‘æ˜¯ç”±æ¡†æ¶å†…éƒ¨å¤„ç†çš„ã€‚\\r\\n\\r\\nlet cache = new Map();\\r\\n\\r\\nexport function fetchData(url) {\\r\\n  if (!cache.has(url)) {\\r\\n    cache.set(url, getData(url));\\r\\n  }\\r\\n  return cache.get(url);\\r\\n}\\r\\n\\r\\nasync function getData(url) {\\r\\n  if (url === '/the-beatles/albums') {\\r\\n    return await getAlbums();\\r\\n  } else if (url === '/the-beatles/bio') {\\r\\n    return await getBio();\\r\\n  } else {\\r\\n    throw Error('Not implemented');\\r\\n  }\\r\\n}\\r\\n\\r\\nasync function getBio() {\\r\\n  // Add a fake delay to make waiting noticeable.\\r\\n  await new Promise(resolve => {\\r\\n    setTimeout(resolve, 500);\\r\\n  });\\r\\n\\r\\n  return `The Beatles were an English rock band,\\r\\n    formed in Liverpool in 1960, that comprised\\r\\n    John Lennon, Paul McCartney, George Harrison\\r\\n    and Ringo Starr.`;\\r\\n}\\r\\n\\r\\nasync function getAlbums() {\\r\\n  // Add a fake delay to make waiting noticeable.\\r\\n  await new Promise(resolve => {\\r\\n    setTimeout(resolve, 3000);\\r\\n  });\\r\\n\\r\\n  return [{\\r\\n    id: 13,\\r\\n    title: 'Let It Be',\\r\\n    year: 1970\\r\\n  }, {\\r\\n    id: 12,\\r\\n    title: 'Abbey Road',\\r\\n    year: 1969\\r\\n  }, {\\r\\n    id: 11,\\r\\n    title: 'Yellow Submarine',\\r\\n    year: 1969\\r\\n  }, {\\r\\n    id: 10,\\r\\n    title: 'The Beatles',\\r\\n    year: 1968\\r\\n  }, {\\r\\n    id: 9,\\r\\n    title: 'Magical Mystery Tour',\\r\\n    year: 1967\\r\\n  }, {\\r\\n    id: 8,\\r\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\r\\n    year: 1967\\r\\n  }, {\\r\\n    id: 7,\\r\\n    title: 'Revolver',\\r\\n    year: 1966\\r\\n  }, {\\r\\n    id: 6,\\r\\n    title: 'Rubber Soul',\\r\\n    year: 1965\\r\\n  }, {\\r\\n    id: 5,\\r\\n    title: 'Help!',\\r\\n    year: 1965\\r\\n  }, {\\r\\n    id: 4,\\r\\n    title: 'Beatles For Sale',\\r\\n    year: 1964\\r\\n  }, {\\r\\n    id: 3,\\r\\n    title: 'A Hard Day\\\\'s Night',\\r\\n    year: 1964\\r\\n  }, {\\r\\n    id: 2,\\r\\n    title: 'With The Beatles',\\r\\n    year: 1963\\r\\n  }, {\\r\\n    id: 1,\\r\\n    title: 'Please Please Me',\\r\\n    year: 1963\\r\\n  }];\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"main {\\r\\n  min-height: 200px;\\r\\n  padding: 10px;\\r\\n}\\r\\n\\r\\n.layout {\\r\\n  border: 1px solid black;\\r\\n}\\r\\n\\r\\n.header {\\r\\n  background: #222;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n.bio { font-style: italic; }\\r\\n\\r\\n.panel {\\r\\n  border: 1px solid #aaa;\\r\\n  border-radius: 6px;\\r\\n  margin-top: 20px;\\r\\n  padding: 10px;\\r\\n}\\r\\n\\r\\n.glimmer-panel {\\r\\n  border: 1px dashed #aaa;\\r\\n  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);\\r\\n  border-radius: 6px;\\r\\n  margin-top: 20px;\\r\\n  padding: 10px;\\r\\n}\\r\\n\\r\\n.glimmer-line {\\r\\n  display: block;\\r\\n  width: 60%;\\r\\n  height: 20px;\\r\\n  margin: 10px;\\r\\n  border-radius: 4px;\\r\\n  background: #f0f0f0;\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"138\",{\"children\":[\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"å¯ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":\"Suspense\"}],\" çš„è·¯ç”±é»˜è®¤æƒ…å†µä¸‹ä¼šå°†é¡µé¢å¯¼èˆªæ›´æ–°åŒ…è£…ä¸º transitionã€‚\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-an-error-to-users-with-error-boundary\",\"children\":\"Displaying an error to users with a error boundary \"}],\"\\n\",[\"$r\",\"Canary\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"Error Boundary for useTransition is currently only available in Reactâ€™s canary and experimental channels. Learn more about \",[\"$r\",\"a\",null,{\"href\":\"/community/versioning-policy#all-release-channels\",\"children\":\"Reactâ€™s release channels here\"}],\".\"]}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"If a function passed to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" throws an error, you can display an error to your user with an \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Component#catching-rendering-errors-with-an-error-boundary\",\"children\":\"error boundary\"}],\". To use an error boundary, wrap the component where you are calling the \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" in an error boundary. Once the function passed to \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" errors, the fallback for the error boundary will be displayed.\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AddCommentContainer.js active\",\"children\":\"import { useTransition } from \\\"react\\\";\\r\\nimport { ErrorBoundary } from \\\"react-error-boundary\\\";\\r\\n\\r\\nexport function AddCommentContainer() {\\r\\n  return (\\r\\n    <ErrorBoundary fallback={<p>âš ï¸Something went wrong</p>}>\\r\\n        <AddCommentButton />\\r\\n    </ErrorBoundary>\\r\\n  );\\r\\n}\\r\\n\\r\\nfunction addComment(comment) {\\r\\n  // For demonstration purposes to show Error Boundary\\r\\n  if(comment == null){\\r\\n    throw Error('Example error')\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction AddCommentButton() {\\r\\n  const [pending, startTransition] = useTransition();\\r\\n\\r\\n  return (\\r\\n    <button\\r\\n      disabled={pending}\\r\\n      onClick={() => {\\r\\n        startTransition(() => {\\r\\n          // Intentionally not passing a comment\\r\\n          // so error gets thrown\\r\\n          addComment();\\r\\n        });\\r\\n      }}>\\r\\n        Add comment\\r\\n      </button>\\r\\n  );\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js hidden\",\"children\":\"import { AddCommentContainer } from \\\"./AddCommentContainer.js\\\";\\r\\n\\r\\nexport default function App() {\\r\\n  return <AddCommentContainer />;\\r\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/index.js hidden\",\"children\":\"// TODO: update to import from stable\\r\\n// react instead of canary once the `use`\\r\\n// Hook is in a stable release of React\\r\\nimport React, { StrictMode } from 'react';\\r\\nimport { createRoot } from 'react-dom/client';\\r\\nimport './styles.css';\\r\\n\\r\\n// TODO: update this example to use\\r\\n// the Codesandbox Server Component\\r\\n// demo environment once it is created\\r\\nimport App from './App';\\r\\n\\r\\nconst root = createRoot(document.getElementById('root'));\\r\\nroot.render(\\r\\n  <StrictMode>\\r\\n    <App />\\r\\n  </StrictMode>\\r\\n);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\r\\n  \\\"dependencies\\\": {\\r\\n    \\\"react\\\": \\\"canary\\\",\\r\\n    \\\"react-dom\\\": \\\"canary\\\",\\r\\n    \\\"react-scripts\\\": \\\"^5.0.0\\\",\\r\\n    \\\"react-error-boundary\\\": \\\"4.0.3\\\"\\r\\n  },\\r\\n  \\\"main\\\": \\\"/index.js\\\"\\r\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"Troubleshooting \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-an-input-in-a-transition-doesnt-work\",\"children\":\"åœ¨ transition ä¸­æ— æ³•æ›´æ–°è¾“å…¥æ¡†å†…å®¹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¸åº”å°†æ§åˆ¶è¾“å…¥æ¡†çš„çŠ¶æ€å˜é‡æ ‡è®°ä¸º transitionï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4,10}\",\"children\":\"const [text, setText] = useState('');\\r\\n// ...\\r\\nfunction handleChange(e) {\\r\\n  // âŒ ä¸åº”å°†å—æ§è¾“å…¥æ¡†çš„çŠ¶æ€å˜é‡æ ‡è®°ä¸º transition\\r\\n  startTransition(() => {\\r\\n    setText(e.target.value);\\r\\n  });\\r\\n}\\r\\n// ...\\r\\nreturn <input value={text} onChange={handleChange} />;\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¿™æ˜¯å› ä¸º transition æ˜¯éé˜»å¡çš„ï¼Œä½†æ˜¯åœ¨å“åº”æ›´æ”¹äº‹ä»¶æ—¶æ›´æ–°è¾“å…¥åº”è¯¥æ˜¯åŒæ­¥çš„ã€‚å¦‚æœæƒ³åœ¨è¾“å…¥æ—¶è¿è¡Œä¸€ä¸ª transitionï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§åšæ³•ï¼š\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"å£°æ˜ä¸¤ä¸ªç‹¬ç«‹çš„çŠ¶æ€å˜é‡ï¼šä¸€ä¸ªç”¨äºè¾“å…¥çŠ¶æ€ï¼ˆå®ƒæ€»æ˜¯åŒæ­¥æ›´æ–°ï¼‰ï¼Œå¦ä¸€ä¸ªç”¨äºåœ¨ transition ä¸­æ›´æ–°ã€‚è¿™æ ·ï¼Œä¾¿å¯ä»¥ä½¿ç”¨åŒæ­¥çŠ¶æ€æ§åˆ¶è¾“å…¥ï¼Œå¹¶å°†ç”¨äº transition çš„çŠ¶æ€å˜é‡ï¼ˆå®ƒå°†â€œæ»åâ€äºè¾“å…¥ï¼‰ä¼ é€’ç»™å…¶ä½™çš„æ¸²æŸ“é€»è¾‘ã€‚\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"æˆ–è€…ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œå¹¶æ·»åŠ  \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\"ï¼Œå®ƒå°†â€œæ»åâ€äºå®é™…å€¼ï¼Œå¹¶è‡ªåŠ¨è§¦å‘éé˜»å¡çš„é‡æ–°æ¸²æŸ“ä»¥â€œè¿½èµ¶â€æ–°å€¼ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"react-doesnt-treat-my-state-update-as-a-transition\",\"children\":\"React æ²¡æœ‰å°†çŠ¶æ€æ›´æ–°è§†ä¸º transition \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“åœ¨ transition ä¸­åŒ…è£…çŠ¶æ€æ›´æ–°æ—¶ï¼Œè¯·ç¡®ä¿å®ƒå‘ç”Ÿåœ¨ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" è°ƒç”¨æœŸé—´ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(() => {\\r\\n  // âœ… åœ¨è°ƒç”¨ startTransition ä¸­æ›´æ–°çŠ¶æ€\\r\\n  setPage('/about');\\r\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" çš„å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥çš„ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä½ ä¸èƒ½åƒè¿™æ ·å°†æ›´æ–°æ ‡è®°ä¸º transitionï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(() => {\\r\\n  // âŒ åœ¨è°ƒç”¨ startTransition åæ›´æ–°çŠ¶æ€\\r\\n  setTimeout(() => {\\r\\n    setPage('/about');\\r\\n  }, 1000);\\r\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç›¸åï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"setTimeout(() => {\\r\\n  startTransition(() => {\\r\\n    // âœ… åœ¨è°ƒç”¨ startTransition ä¸­æ›´æ–°çŠ¶æ€\\r\\n    setPage('/about');\\r\\n  });\\r\\n}, 1000);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç±»ä¼¼åœ°ï¼Œä½ ä¸èƒ½åƒè¿™æ ·å°†æ›´æ–°æ ‡è®°ä¸º transitionï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(async () => {\\r\\n  await someAsyncFunction();\\r\\n  // âŒ åœ¨è°ƒç”¨ startTransition åæ›´æ–°çŠ¶æ€\\r\\n  setPage('/about');\\r\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç„¶è€Œï¼Œä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¯ä»¥æ­£å¸¸å·¥ä½œï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"await someAsyncFunction();\\r\\nstartTransition(() => {\\r\\n  // âœ… åœ¨è°ƒç”¨ startTransition ä¸­æ›´æ–°çŠ¶æ€\\r\\n  setPage('/about');\\r\\n});\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"i-want-to-call-usetransition-from-outside-a-component\",\"children\":[\"æˆ‘æƒ³åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" æ˜¯ä¸€ä¸ª Hookï¼Œå› æ­¤ä¸èƒ½åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨ã€‚è¯·ä½¿ç”¨ç‹¬ç«‹çš„ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" æ–¹æ³•ã€‚å®ƒä»¬çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼Œä½†ä¸æä¾› \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" æ ‡è®°ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"the-function-i-pass-to-starttransition-executes-immediately\",\"children\":[\"æˆ‘ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" çš„å‡½æ•°ä¼šç«‹å³æ‰§è¡Œ \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å¦‚æœä½ è¿è¡Œè¿™æ®µä»£ç ï¼Œå®ƒå°†ä¼šæ‰“å° 1, 2, 3ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,3,6}\",\"children\":\"console.log(1);\\r\\nstartTransition(() => {\\r\\n  console.log(2);\\r\\n  setPage('/about');\\r\\n});\\r\\nconsole.log(3);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"æœŸæœ›æ‰“å° 1, 2, 3\"}],\"ã€‚ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" çš„å‡½æ•°ä¸ä¼šè¢«å»¶è¿Ÿæ‰§è¡Œã€‚ä¸æµè§ˆå™¨çš„ \",[\"$r\",\"code\",null,{\"children\":\"setTimeout\"}],\" ä¸åŒï¼Œå®ƒä¸ä¼šå»¶è¿Ÿæ‰§è¡Œå›è°ƒã€‚React ä¼šç«‹å³æ‰§è¡Œä½ çš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨å®ƒè¿è¡Œçš„åŒæ—¶å®‰æ’çš„ä»»ä½•çŠ¶æ€æ›´æ–°éƒ½è¢«æ ‡è®°ä¸º transitionã€‚ä½ å¯ä»¥å°†å…¶æƒ³è±¡ä¸ºä»¥ä¸‹æ–¹å¼ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// React è¿è¡Œçš„ç®€æ˜“ç‰ˆæœ¬\\r\\n\\r\\nlet isInsideTransition = false;\\r\\n\\r\\nfunction startTransition(scope) {\\r\\n  isInsideTransition = true;\\r\\n  scope();\\r\\n  isInsideTransition = false;\\r\\n}\\r\\n\\r\\nfunction setState() {\\r\\n  if (isInsideTransition) {\\r\\n    // â€¦â€¦å®‰æ’ transition çŠ¶æ€æ›´æ–°â€¦â€¦\\r\\n  } else {\\r\\n    // â€¦â€¦å®‰æ’ç´§æ€¥çŠ¶æ€æ›´æ–°â€¦â€¦\\r\\n  }\\r\\n}\\n\"}]}]]}]]","toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#usetransition\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"useTransition()\"}],\" \"]},{\"url\":\"#starttransition\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" å‡½æ•° \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ç”¨æ³• \"},{\"url\":\"#marking-a-state-update-as-a-non-blocking-transition\",\"depth\":3,\"text\":\"å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºéé˜»å¡çš„ transition \"},{\"url\":\"#updating-the-parent-component-in-a-transition\",\"depth\":3,\"text\":\"åœ¨ transition ä¸­æ›´æ–°çˆ¶ç»„ä»¶ \"},{\"url\":\"#displaying-a-pending-visual-state-during-the-transition\",\"depth\":3,\"text\":\"åœ¨ transition æœŸé—´æ˜¾ç¤ºå¾…å¤„ç†çš„è§†è§‰çŠ¶æ€ \"},{\"url\":\"#preventing-unwanted-loading-indicators\",\"depth\":3,\"text\":\"é¿å…ä¸å¿…è¦çš„åŠ è½½æŒ‡ç¤ºå™¨ \"},{\"url\":\"#building-a-suspense-enabled-router\",\"depth\":3,\"text\":\"æ„å»ºä¸€ä¸ªSuspense-enabled çš„è·¯ç”± \"},{\"url\":\"#displaying-an-error-to-users-with-error-boundary\",\"depth\":3,\"text\":\"Displaying an error to users with a error boundary \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"Troubleshooting \"},{\"url\":\"#updating-an-input-in-a-transition-doesnt-work\",\"depth\":3,\"text\":\"åœ¨ transition ä¸­æ— æ³•æ›´æ–°è¾“å…¥æ¡†å†…å®¹ \"},{\"url\":\"#react-doesnt-treat-my-state-update-as-a-transition\",\"depth\":3,\"text\":\"React æ²¡æœ‰å°†çŠ¶æ€æ›´æ–°è§†ä¸º transition \"},{\"url\":\"#i-want-to-call-usetransition-from-outside-a-component\",\"depth\":3,\"text\":[\"æˆ‘æƒ³åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" \"]},{\"url\":\"#the-function-i-pass-to-starttransition-executes-immediately\",\"depth\":3,\"text\":[\"æˆ‘ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" çš„å‡½æ•°ä¼šç«‹å³æ‰§è¡Œ \"]}]","meta":{"title":"useTransition"}},"__N_SSG":true}