import{_ as s,c as n,o as e,b as a}from"./chunks/framework.B9NywAPp.js";const o=JSON.parse('{"title":"Composition API: Lifecycle Hooks","description":"","frontmatter":{},"headers":[{"level":2,"title":"onMounted()","slug":"onmounted","link":"#onmounted","children":[]},{"level":2,"title":"onUpdated()","slug":"onupdated","link":"#onupdated","children":[]},{"level":2,"title":"onUnmounted()","slug":"onunmounted","link":"#onunmounted","children":[]},{"level":2,"title":"onBeforeMount()","slug":"onbeforemount","link":"#onbeforemount","children":[]},{"level":2,"title":"onBeforeUpdate()","slug":"onbeforeupdate","link":"#onbeforeupdate","children":[]},{"level":2,"title":"onBeforeUnmount()","slug":"onbeforeunmount","link":"#onbeforeunmount","children":[]},{"level":2,"title":"onErrorCaptured()","slug":"onerrorcaptured","link":"#onerrorcaptured","children":[]},{"level":2,"title":"onRenderTracked()","slug":"onrendertracked","link":"#onrendertracked","children":[]},{"level":2,"title":"onRenderTriggered()","slug":"onrendertriggered","link":"#onrendertriggered","children":[]},{"level":2,"title":"onActivated()","slug":"onactivated","link":"#onactivated","children":[]},{"level":2,"title":"onDeactivated()","slug":"ondeactivated","link":"#ondeactivated","children":[]},{"level":2,"title":"onServerPrefetch()","slug":"onserverprefetch","link":"#onserverprefetch","children":[]}],"relativePath":"api/composition-api-lifecycle.md","filePath":"api/composition-api-lifecycle.md"}'),l={name:"api/composition-api-lifecycle.md"},t=[a('<h1 id="composition-api-lifecycle-hooks" tabindex="-1">Composition API: Lifecycle Hooks <a class="header-anchor" href="#composition-api-lifecycle-hooks" aria-label="Permalink to &quot;Composition API: Lifecycle Hooks {#composition-api-lifecycle-hooks}&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">Usage Note</p><p>All APIs listed on this page must be called synchronously during the <code>setup()</code> phase of a component. See <a href="/guide/essentials/lifecycle.html">Guide - Lifecycle Hooks</a> for more details.</p></div><h2 id="onmounted" tabindex="-1">onMounted() <a class="header-anchor" href="#onmounted" aria-label="Permalink to &quot;onMounted() {#onmounted}&quot;">​</a></h2><p>Registers a callback to be called after the component has been mounted.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onMounted</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>A component is considered mounted after:</p><ul><li><p>All of its synchronous child components have been mounted (does not include async components or components inside <code>&lt;Suspense&gt;</code> trees).</p></li><li><p>Its own DOM tree has been created and inserted into the parent container. Note it only guarantees that the component&#39;s DOM tree is in-document if the application&#39;s root container is also in-document.</p></li></ul><p>This hook is typically used for performing side effects that need access to the component&#39;s rendered DOM, or for limiting DOM-related code to the client in a <a href="/guide/scaling-up/ssr.html">server-rendered application</a>.</p><p><strong>This hook is not called during server-side rendering.</strong></p></li><li><p><strong>Example</strong></p><p>Accessing an element via template ref:</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#B392F0;"> setup</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, onMounted } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;vue&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> el</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> ref</span><span style="color:#E1E4E8;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">  el.value </span><span style="color:#6A737D;">// &lt;div&gt;</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> ref</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;el&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div></li></ul><h2 id="onupdated" tabindex="-1">onUpdated() <a class="header-anchor" href="#onupdated" aria-label="Permalink to &quot;onUpdated() {#onupdated}&quot;">​</a></h2><p>Registers a callback to be called after the component has updated its DOM tree due to a reactive state change.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onUpdated</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>A parent component&#39;s updated hook is called after that of its child components.</p><p>This hook is called after any DOM update of the component, which can be caused by different state changes, because multiple state changes can be batched into a single render cycle for performance reasons. If you need to access the updated DOM after a specific state change, use <a href="/api/general.html#nexttick">nextTick()</a> instead.</p><p><strong>This hook is not called during server-side rendering.</strong></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Do not mutate component state in the updated hook - this will likely lead to an infinite update loop!</p></div></li><li><p><strong>Example</strong></p><p>Accessing updated DOM:</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#B392F0;"> setup</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, onUpdated } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;vue&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> count</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">onUpdated</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#6A737D;">  // text content should be the same as current `count.value`</span></span>\n<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;count&#39;</span><span style="color:#E1E4E8;">).textContent)</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;count&quot;</span><span style="color:#E1E4E8;"> @</span><span style="color:#B392F0;">click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">count</span><span style="color:#F97583;">++</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">&gt;{{ count }}&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div></li></ul><h2 id="onunmounted" tabindex="-1">onUnmounted() <a class="header-anchor" href="#onunmounted" aria-label="Permalink to &quot;onUnmounted() {#onunmounted}&quot;">​</a></h2><p>Registers a callback to be called after the component has been unmounted.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onUnmounted</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>A component is considered unmounted after:</p><ul><li><p>All of its child components have been unmounted.</p></li><li><p>All of its associated reactive effects (render effect and computed / watchers created during <code>setup()</code>) have been stopped.</p></li></ul><p>Use this hook to clean up manually created side effects such as timers, DOM event listeners or server connections.</p><p><strong>This hook is not called during server-side rendering.</strong></p></li><li><p><strong>Example</strong></p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#B392F0;"> setup</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { onMounted, onUnmounted } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;vue&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> intervalId</span></span>\n<span class="line"><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">  intervalId </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> setInterval</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#6A737D;">    // ...</span></span>\n<span class="line"><span style="color:#E1E4E8;">  })</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">onUnmounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> clearInterval</span><span style="color:#E1E4E8;">(intervalId))</span></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div></li></ul><h2 id="onbeforemount" tabindex="-1">onBeforeMount() <a class="header-anchor" href="#onbeforemount" aria-label="Permalink to &quot;onBeforeMount() {#onbeforemount}&quot;">​</a></h2><p>Registers a hook to be called right before the component is to be mounted.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onBeforeMount</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>When this hook is called, the component has finished setting up its reactive state, but no DOM nodes have been created yet. It is about to execute its DOM render effect for the first time.</p><p><strong>This hook is not called during server-side rendering.</strong></p></li></ul><h2 id="onbeforeupdate" tabindex="-1">onBeforeUpdate() <a class="header-anchor" href="#onbeforeupdate" aria-label="Permalink to &quot;onBeforeUpdate() {#onbeforeupdate}&quot;">​</a></h2><p>Registers a hook to be called right before the component is about to update its DOM tree due to a reactive state change.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onBeforeUpdate</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>This hook can be used to access the DOM state before Vue updates the DOM. It is also safe to modify component state inside this hook.</p><p><strong>This hook is not called during server-side rendering.</strong></p></li></ul><h2 id="onbeforeunmount" tabindex="-1">onBeforeUnmount() <a class="header-anchor" href="#onbeforeunmount" aria-label="Permalink to &quot;onBeforeUnmount() {#onbeforeunmount}&quot;">​</a></h2><p>Registers a hook to be called right before a component instance is to be unmounted.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onBeforeUnmount</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>When this hook is called, the component instance is still fully functional.</p><p><strong>This hook is not called during server-side rendering.</strong></p></li></ul><h2 id="onerrorcaptured" tabindex="-1">onErrorCaptured() <a class="header-anchor" href="#onerrorcaptured" aria-label="Permalink to &quot;onErrorCaptured() {#onerrorcaptured}&quot;">​</a></h2><p>Registers a hook to be called when an error propagating from a descendant component has been captured.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onErrorCaptured</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">callback</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ErrorCapturedHook</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">type</span><span style="color:#B392F0;"> ErrorCapturedHook</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span></span>\n<span class="line"><span style="color:#FFAB70;">  err</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> unknown</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#FFAB70;">  instance</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ComponentPublicInstance</span><span style="color:#F97583;"> |</span><span style="color:#79B8FF;"> null</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#FFAB70;">  info</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span></span>\n<span class="line"><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> boolean</span><span style="color:#F97583;"> |</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>Errors can be captured from the following sources:</p><ul><li>Component renders</li><li>Event handlers</li><li>Lifecycle hooks</li><li><code>setup()</code> function</li><li>Watchers</li><li>Custom directive hooks</li><li>Transition hooks</li></ul><p>The hook receives three arguments: the error, the component instance that triggered the error, and an information string specifying the error source type.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In production, the 3rd argument (<code>info</code>) will be a shortened code instead of the full information string. You can find the code to string mapping in the <a href="/error-reference/#runtime-errors">Production Error Code Reference</a>.</p></div><p>You can modify component state in <code>errorCaptured()</code> to display an error state to the user. However, it is important that the error state should not render the original content that caused the error; otherwise the component will be thrown into an infinite render loop.</p><p>The hook can return <code>false</code> to stop the error from propagating further. See error propagation details below.</p><p><strong>Error Propagation Rules</strong></p><ul><li><p>By default, all errors are still sent to the application-level <a href="/api/application.html#app-config-errorhandler"><code>app.config.errorHandler</code></a> if it is defined, so that these errors can still be reported to an analytics service in a single place.</p></li><li><p>If multiple <code>errorCaptured</code> hooks exist on a component&#39;s inheritance chain or parent chain, all of them will be invoked on the same error, in the order of bottom to top. This is similar to the bubbling mechanism of native DOM events.</p></li><li><p>If the <code>errorCaptured</code> hook itself throws an error, both this error and the original captured error are sent to <code>app.config.errorHandler</code>.</p></li><li><p>An <code>errorCaptured</code> hook can return <code>false</code> to prevent the error from propagating further. This is essentially saying &quot;this error has been handled and should be ignored.&quot; It will prevent any additional <code>errorCaptured</code> hooks or <code>app.config.errorHandler</code> from being invoked for this error.</p></li></ul></li></ul><h2 id="onrendertracked" tabindex="-1">onRenderTracked() <sup class="vt-badge dev-only"></sup> <a class="header-anchor" href="#onrendertracked" aria-label="Permalink to &quot;onRenderTracked() &lt;sup class=&quot;vt-badge dev-only&quot; /&gt; {#onrendertracked}&quot;">​</a></h2><p>Registers a debug hook to be called when a reactive dependency has been tracked by the component&#39;s render effect.</p><p><strong>This hook is development-mode-only and not called during server-side rendering.</strong></p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onRenderTracked</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">callback</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> DebuggerHook</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">type</span><span style="color:#B392F0;"> DebuggerHook</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> DebuggerEvent</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">type</span><span style="color:#B392F0;"> DebuggerEvent</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#FFAB70;">  effect</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ReactiveEffect</span></span>\n<span class="line"><span style="color:#FFAB70;">  target</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> object</span></span>\n<span class="line"><span style="color:#FFAB70;">  type</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> TrackOpTypes</span><span style="color:#6A737D;"> /* &#39;get&#39; | &#39;has&#39; | &#39;iterate&#39; */</span></span>\n<span class="line"><span style="color:#FFAB70;">  key</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> any</span></span>\n<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>See also</strong> <a href="/guide/extras/reactivity-in-depth.html">Reactivity in Depth</a></p></li></ul><h2 id="onrendertriggered" tabindex="-1">onRenderTriggered() <sup class="vt-badge dev-only"></sup> <a class="header-anchor" href="#onrendertriggered" aria-label="Permalink to &quot;onRenderTriggered() &lt;sup class=&quot;vt-badge dev-only&quot; /&gt; {#onrendertriggered}&quot;">​</a></h2><p>Registers a debug hook to be called when a reactive dependency triggers the component&#39;s render effect to be re-run.</p><p><strong>This hook is development-mode-only and not called during server-side rendering.</strong></p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onRenderTriggered</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">callback</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> DebuggerHook</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">type</span><span style="color:#B392F0;"> DebuggerHook</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> DebuggerEvent</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">type</span><span style="color:#B392F0;"> DebuggerEvent</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#FFAB70;">  effect</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> ReactiveEffect</span></span>\n<span class="line"><span style="color:#FFAB70;">  target</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> object</span></span>\n<span class="line"><span style="color:#FFAB70;">  type</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> TriggerOpTypes</span><span style="color:#6A737D;"> /* &#39;set&#39; | &#39;add&#39; | &#39;delete&#39; | &#39;clear&#39; */</span></span>\n<span class="line"><span style="color:#FFAB70;">  key</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> any</span></span>\n<span class="line"><span style="color:#FFAB70;">  newValue</span><span style="color:#F97583;">?:</span><span style="color:#79B8FF;"> any</span></span>\n<span class="line"><span style="color:#FFAB70;">  oldValue</span><span style="color:#F97583;">?:</span><span style="color:#79B8FF;"> any</span></span>\n<span class="line"><span style="color:#FFAB70;">  oldTarget</span><span style="color:#F97583;">?:</span><span style="color:#B392F0;"> Map</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#F97583;">|</span><span style="color:#B392F0;"> Set</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>See also</strong> <a href="/guide/extras/reactivity-in-depth.html">Reactivity in Depth</a></p></li></ul><h2 id="onactivated" tabindex="-1">onActivated() <a class="header-anchor" href="#onactivated" aria-label="Permalink to &quot;onActivated() {#onactivated}&quot;">​</a></h2><p>Registers a callback to be called after the component instance is inserted into the DOM as part of a tree cached by <a href="/api/built-in-components.html#keepalive"><code>&lt;KeepAlive&gt;</code></a>.</p><p><strong>This hook is not called during server-side rendering.</strong></p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onActivated</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>See also</strong> <a href="/guide/built-ins/keep-alive.html#lifecycle-of-cached-instance">Guide - Lifecycle of Cached Instance</a></p></li></ul><h2 id="ondeactivated" tabindex="-1">onDeactivated() <a class="header-anchor" href="#ondeactivated" aria-label="Permalink to &quot;onDeactivated() {#ondeactivated}&quot;">​</a></h2><p>Registers a callback to be called after the component instance is removed from the DOM as part of a tree cached by <a href="/api/built-in-components.html#keepalive"><code>&lt;KeepAlive&gt;</code></a>.</p><p><strong>This hook is not called during server-side rendering.</strong></p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onDeactivated</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>See also</strong> <a href="/guide/built-ins/keep-alive.html#lifecycle-of-cached-instance">Guide - Lifecycle of Cached Instance</a></p></li></ul><h2 id="onserverprefetch" tabindex="-1">onServerPrefetch() <sup class="vt-badge" data-text="SSR only"></sup> <a class="header-anchor" href="#onserverprefetch" aria-label="Permalink to &quot;onServerPrefetch() &lt;sup class=&quot;vt-badge&quot; data-text=&quot;SSR only&quot; /&gt; {#onserverprefetch}&quot;">​</a></h2><p>Registers an async function to be resolved before the component instance is to be rendered on the server.</p><ul><li><p><strong>Type</strong></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> onServerPrefetch</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">callback</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> Promise</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt;)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span></span></code></pre></div></li><li><p><strong>Details</strong></p><p>If the callback returns a Promise, the server renderer will wait until the Promise is resolved before rendering the component.</p><p>This hook is only called during server-side rendering can be used to perform server-only data fetching.</p></li><li><p><strong>Example</strong></p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#B392F0;"> setup</span><span style="color:#E1E4E8;">&gt;</span></span>\n<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, onServerPrefetch, onMounted } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;vue&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> data</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">onServerPrefetch</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#6A737D;">  // component is rendered as part of the initial request</span></span>\n<span class="line"><span style="color:#6A737D;">  // pre-fetch data on server as it is faster than on the client</span></span>\n<span class="line"><span style="color:#E1E4E8;">  data.value </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> fetchOnServer</span><span style="color:#E1E4E8;">(</span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;">)</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">data.value) {</span></span>\n<span class="line"><span style="color:#6A737D;">    // if data is null on mount, it means the component</span></span>\n<span class="line"><span style="color:#6A737D;">    // is dynamically rendered on the client. Perform a</span></span>\n<span class="line"><span style="color:#6A737D;">    // client-side fetch instead.</span></span>\n<span class="line"><span style="color:#E1E4E8;">    data.value </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> fetchOnClient</span><span style="color:#E1E4E8;">(</span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;">)</span></span>\n<span class="line"><span style="color:#E1E4E8;">  }</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span>\n<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><p><strong>See also</strong> <a href="/guide/scaling-up/ssr.html">Server-Side Rendering</a></p></li></ul>',42)];const p=s(l,[["render",function(s,a,o,l,p,r){return e(),n("div",null,t)}]]);export{o as __pageData,p as default};
