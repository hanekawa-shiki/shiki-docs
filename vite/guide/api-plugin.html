<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plugin API | Vite (local)</title>
    <meta name="description" content="Next Generation Frontend Tooling">
    <meta name="generator" content="VitePress v1.0.0-rc.31">
    <link rel="preload stylesheet" href="/assets/style.SVmozhjF.css" as="style">
    
    <script type="module" src="/assets/app.AgtUaV5B.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.njmvNCfc.js">
    <link rel="modulepreload" href="/assets/chunks/theme.Akemwuej.js">
    <link rel="modulepreload" href="/assets/guide_api-plugin.md.3fQa_tjH.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="alternate" type="application/rss+xml" href="/blog.rss">
    <link rel="me" href="https://m.webtoo.ls/@vite">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Vite">
    <meta property="og:image" content="https://vitejs.dev/og-image.png">
    <meta property="og:url" content="https://vitejs.dev">
    <meta property="og:description" content="Next Generation Frontend Tooling">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@vite_js">
    <meta name="theme-color" content="#646cff">
    <script src="https://cdn.usefathom.com/script.js" data-site="CBDFBSLI" data-spa="auto" defer></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-bc64b1fc><!--[--><!--]--><!--[--><span tabindex="-1" data-v-55eaad62></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-55eaad62> Skip to content </a><!--]--><!----><header class="VPNav" data-v-bc64b1fc data-v-dabbe568><div class="VPNavBar has-sidebar" data-v-dabbe568 data-v-b6d9a2c7><div class="container" data-v-b6d9a2c7><div class="title" data-v-b6d9a2c7><div class="VPNavBarTitle has-sidebar" data-v-b6d9a2c7 data-v-cc0d4df4><a class="title" href="/" data-v-cc0d4df4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-deecd391><!--]--><!--[-->Vite (local)<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-b6d9a2c7><div class="curtain" data-v-b6d9a2c7></div><div class="content-body" data-v-b6d9a2c7><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b6d9a2c7><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b6d9a2c7 data-v-4e6f8e95><span id="main-nav-aria-label" class="visually-hidden" data-v-4e6f8e95>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/guide/" tabindex="0" data-v-4e6f8e95 data-v-b44f82d6><!--[--><span data-v-b44f82d6>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/config/" tabindex="0" data-v-4e6f8e95 data-v-b44f82d6><!--[--><span data-v-b44f82d6>Config</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/plugins/" tabindex="0" data-v-4e6f8e95 data-v-b44f82d6><!--[--><span data-v-b44f82d6>Plugins</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-4e6f8e95 data-v-8e1d3227><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-8e1d3227><span class="text" data-v-8e1d3227><!----><span data-v-8e1d3227>Resources</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-8e1d3227><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-8e1d3227><div class="VPMenu" data-v-8e1d3227 data-v-8b6e50b0><div class="items" data-v-8b6e50b0><!--[--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link" href="/team.html" data-v-29ba655e><!--[-->Team<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link" href="/blog.html" data-v-29ba655e><!--[-->Blog<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link" href="/releases.html" data-v-29ba655e><!--[-->Releases<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-8b6e50b0 data-v-4b551096><!----><!--[--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://twitter.com/vite_js" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Twitter<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://chat.vitejs.dev" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Discord Chat<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Awesome Vite<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://viteconf.org" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->ViteConf<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://dev.to/t/vite" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->DEV Community<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Rollup Plugins Compat<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Changelog<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4b551096 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://github.com/vitejs/vite/blob/main/CONTRIBUTING.md" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Contributing<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-4e6f8e95 data-v-8e1d3227><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-8e1d3227><span class="text" data-v-8e1d3227><!----><span data-v-8e1d3227>Version</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-8e1d3227><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-8e1d3227><div class="VPMenu" data-v-8e1d3227 data-v-8b6e50b0><div class="items" data-v-8b6e50b0><!--[--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://vitejs.dev" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Vite 5 Docs (release)<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://v4.vitejs.dev" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Vite 4 Docs<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://v3.vitejs.dev" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Vite 3 Docs<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8b6e50b0 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://v2.vitejs.dev" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Vite 2 Docs<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-b6d9a2c7 data-v-81836556 data-v-8e1d3227><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-8e1d3227><span class="text" data-v-8e1d3227><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-8e1d3227><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg><!----><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-8e1d3227><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-8e1d3227><div class="VPMenu" data-v-8e1d3227 data-v-8b6e50b0><!----><!--[--><!--[--><div class="items" data-v-81836556><p class="title" data-v-81836556>English</p><!--[--><div class="VPMenuLink" data-v-81836556 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://cn.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->简体中文<!--]--></a></div><div class="VPMenuLink" data-v-81836556 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://ja.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->日本語<!--]--></a></div><div class="VPMenuLink" data-v-81836556 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://es.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Español<!--]--></a></div><div class="VPMenuLink" data-v-81836556 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://pt.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Português<!--]--></a></div><div class="VPMenuLink" data-v-81836556 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://ko.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->한국어<!--]--></a></div><div class="VPMenuLink" data-v-81836556 data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://de.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Deutsch<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-b6d9a2c7 data-v-9c6f3347><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-9c6f3347 data-v-b4724d97 data-v-897a5b6d><span class="check" data-v-897a5b6d><span class="icon" data-v-897a5b6d><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b4724d97><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b4724d97><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b6d9a2c7 data-v-14dd9868 data-v-d4076cb2><!--[--><a class="VPSocialLink no-icon" href="https://elk.zone/m.webtoo.ls/@vite" aria-label="mastodon" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mastodon</title><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg></a><a class="VPSocialLink no-icon" href="https://twitter.com/vite_js" aria-label="twitter" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z"/></svg></a><a class="VPSocialLink no-icon" href="https://chat.vitejs.dev" aria-label="discord" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></a><a class="VPSocialLink no-icon" href="https://github.com/vitejs/vite" aria-label="github" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b6d9a2c7 data-v-6c33618d data-v-8e1d3227><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8e1d3227><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8e1d3227><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8e1d3227><div class="VPMenu" data-v-8e1d3227 data-v-8b6e50b0><!----><!--[--><!--[--><div class="group translations" data-v-6c33618d><p class="trans-title" data-v-6c33618d>English</p><!--[--><div class="VPMenuLink" data-v-6c33618d data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://cn.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->简体中文<!--]--></a></div><div class="VPMenuLink" data-v-6c33618d data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://ja.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->日本語<!--]--></a></div><div class="VPMenuLink" data-v-6c33618d data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://es.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Español<!--]--></a></div><div class="VPMenuLink" data-v-6c33618d data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://pt.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Português<!--]--></a></div><div class="VPMenuLink" data-v-6c33618d data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://ko.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->한국어<!--]--></a></div><div class="VPMenuLink" data-v-6c33618d data-v-29ba655e><a class="VPLink link vp-external-link-icon" href="https://de.vitejs.dev/guide/api-plugin.html" target="_blank" rel="noreferrer" data-v-29ba655e><!--[-->Deutsch<!--]--></a></div><!--]--></div><div class="group" data-v-6c33618d><div class="item appearance" data-v-6c33618d><p class="label" data-v-6c33618d>Appearance</p><div class="appearance-action" data-v-6c33618d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-6c33618d data-v-b4724d97 data-v-897a5b6d><span class="check" data-v-897a5b6d><span class="icon" data-v-897a5b6d><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-b4724d97><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-b4724d97><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-6c33618d><div class="item social-links" data-v-6c33618d><div class="VPSocialLinks social-links-list" data-v-6c33618d data-v-d4076cb2><!--[--><a class="VPSocialLink no-icon" href="https://elk.zone/m.webtoo.ls/@vite" aria-label="mastodon" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mastodon</title><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg></a><a class="VPSocialLink no-icon" href="https://twitter.com/vite_js" aria-label="twitter" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z"/></svg></a><a class="VPSocialLink no-icon" href="https://chat.vitejs.dev" aria-label="discord" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></a><a class="VPSocialLink no-icon" href="https://github.com/vitejs/vite" aria-label="github" target="_blank" rel="noopener" data-v-d4076cb2 data-v-d2a18d2e><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b6d9a2c7 data-v-8ba5aa1a><span class="container" data-v-8ba5aa1a><span class="top" data-v-8ba5aa1a></span><span class="middle" data-v-8ba5aa1a></span><span class="bottom" data-v-8ba5aa1a></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-bc64b1fc data-v-50868e64><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-50868e64><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-50868e64><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-50868e64>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-50868e64 data-v-6b897942><button data-v-6b897942>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-bc64b1fc data-v-7709946e><div class="curtain" data-v-7709946e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-7709946e><span class="visually-hidden" id="sidebar-aria-label" data-v-7709946e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-7709946e><section class="VPSidebarItem level-0" data-v-7709946e data-v-587a34da><div class="item" role="button" tabindex="0" data-v-587a34da><div class="indicator" data-v-587a34da></div><h2 class="text" data-v-587a34da>Guide</h2><!----></div><div class="items" data-v-587a34da><!--[--><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/why.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Why Vite</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/features.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Features</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/cli.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>CLI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/using-plugins.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Using Plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/dep-pre-bundling.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Dependency Pre-Bundling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/assets.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Static Asset Handling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/build.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Building for Production</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/static-deploy.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Deploying a Static Site</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/env-and-mode.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Env Variables and Modes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/ssr.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Server-Side Rendering (SSR)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/backend-integration.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Backend Integration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/comparisons.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Comparisons</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/troubleshooting.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Troubleshooting</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/performance.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Performance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/philosophy.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Philosophy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/migration.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Migration from v4</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7709946e><section class="VPSidebarItem level-0 has-active" data-v-7709946e data-v-587a34da><div class="item" role="button" tabindex="0" data-v-587a34da><div class="indicator" data-v-587a34da></div><h2 class="text" data-v-587a34da>APIs</h2><!----></div><div class="items" data-v-587a34da><!--[--><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/api-plugin.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Plugin API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/api-hmr.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>HMR API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/guide/api-javascript.html" data-v-587a34da><!--[--><p class="text" data-v-587a34da>JavaScript API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-587a34da data-v-587a34da><div class="item" data-v-587a34da><div class="indicator" data-v-587a34da></div><a class="VPLink link link" href="/config/" data-v-587a34da><!--[--><p class="text" data-v-587a34da>Config Reference</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-bc64b1fc data-v-a545eac6><div class="VPDoc has-sidebar has-aside" data-v-a545eac6 data-v-271031cd><!--[--><!--]--><div class="container" data-v-271031cd><div class="aside" data-v-271031cd><div class="aside-curtain" data-v-271031cd></div><div class="aside-container" data-v-271031cd><div class="aside-content" data-v-271031cd><div class="VPDocAside" data-v-271031cd data-v-a3c92591><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-a3c92591 data-v-d659c077><div class="content" data-v-d659c077><div class="outline-marker" data-v-d659c077></div><div class="outline-title" role="heading" aria-level="2" data-v-d659c077>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d659c077><span class="visually-hidden" id="doc-outline-aria-label" data-v-d659c077> Table of Contents for current page </span><ul class="root" data-v-d659c077 data-v-423f5daf><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-a3c92591></div><!--[--><!--[--><!--[--><!--[--><!--[--><a class="viteconf" href="https://viteconf.org/23/replay?utm=vite-sidebar" target="_blank"><img width="22" height="22" src="/viteconf.svg"><span><p class="extra-info">Beyond Fast</p><p class="heading">ViteConf 2023</p><p class="extra-info">Watch the replay!</p></span></a><!----><!--]--><!--]--><!--]--><!--]--><!--]--><div class="VPDocAsideCarbonAds" data-v-a3c92591><div class="VPCarbonAds" data-v-28443a79></div></div><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-271031cd><div class="content-container" data-v-271031cd><!--[--><!--]--><!----><main class="main" data-v-271031cd><div style="position:relative;" class="vp-doc _guide_api-plugin" data-v-271031cd><div><h1 id="plugin-api" tabindex="-1">Plugin API <a class="header-anchor" href="#plugin-api" aria-label="Permalink to &quot;Plugin API&quot;">​</a></h1><p>Vite plugins extends Rollup&#39;s well-designed plugin interface with a few extra Vite-specific options. As a result, you can write a Vite plugin once and have it work for both dev and build.</p><p><strong>It is recommended to go through <a href="https://rollupjs.org/plugin-development/" target="_blank" rel="noreferrer">Rollup&#39;s plugin documentation</a> first before reading the sections below.</strong></p><h2 id="authoring-a-plugin" tabindex="-1">Authoring a Plugin <a class="header-anchor" href="#authoring-a-plugin" aria-label="Permalink to &quot;Authoring a Plugin&quot;">​</a></h2><p>Vite strives to offer established patterns out of the box, so before creating a new plugin make sure that you check the <a href="https://vitejs.dev/guide/features" target="_blank" rel="noreferrer">Features guide</a> to see if your need is covered. Also review available community plugins, both in the form of a <a href="https://github.com/rollup/awesome" target="_blank" rel="noreferrer">compatible Rollup plugin</a> and <a href="https://github.com/vitejs/awesome-vite#plugins" target="_blank" rel="noreferrer">Vite Specific plugins</a></p><p>When creating a plugin, you can inline it in your <code>vite.config.js</code>. There is no need to create a new package for it. Once you see that a plugin was useful in your projects, consider sharing it to help others <a href="https://chat.vitejs.dev" target="_blank" rel="noreferrer">in the ecosystem</a>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>When learning, debugging, or authoring plugins, we suggest including <a href="https://github.com/antfu/vite-plugin-inspect" target="_blank" rel="noreferrer">vite-plugin-inspect</a> in your project. It allows you to inspect the intermediate state of Vite plugins. After installing, you can visit <code>localhost:5173/__inspect/</code> to inspect the modules and transformation stack of your project. Check out install instructions in the <a href="https://github.com/antfu/vite-plugin-inspect" target="_blank" rel="noreferrer">vite-plugin-inspect docs</a>. <img src="/assets/vite-plugin-inspect.MvcTO-yv.png" alt="vite-plugin-inspect"></p></div><h2 id="conventions" tabindex="-1">Conventions <a class="header-anchor" href="#conventions" aria-label="Permalink to &quot;Conventions&quot;">​</a></h2><p>If the plugin doesn&#39;t use Vite specific hooks and can be implemented as a <a href="#rollup-plugin-compatibility">Compatible Rollup Plugin</a>, then it is recommended to use the <a href="https://rollupjs.org/plugin-development/#conventions" target="_blank" rel="noreferrer">Rollup Plugin naming conventions</a>.</p><ul><li>Rollup Plugins should have a clear name with <code>rollup-plugin-</code> prefix.</li><li>Include <code>rollup-plugin</code> and <code>vite-plugin</code> keywords in package.json.</li></ul><p>This exposes the plugin to be also used in pure Rollup or WMR based projects</p><p>For Vite only plugins</p><ul><li>Vite Plugins should have a clear name with <code>vite-plugin-</code> prefix.</li><li>Include <code>vite-plugin</code> keyword in package.json.</li><li>Include a section in the plugin docs detailing why it is a Vite only plugin (for example, it uses Vite specific plugin hooks).</li></ul><p>If your plugin is only going to work for a particular framework, its name should be included as part of the prefix</p><ul><li><code>vite-plugin-vue-</code> prefix for Vue Plugins</li><li><code>vite-plugin-react-</code> prefix for React Plugins</li><li><code>vite-plugin-svelte-</code> prefix for Svelte Plugins</li></ul><p>See also <a href="#virtual-modules-convention">Virtual Modules Convention</a>.</p><h2 id="plugins-config" tabindex="-1">Plugins config <a class="header-anchor" href="#plugins-config" aria-label="Permalink to &quot;Plugins config&quot;">​</a></h2><p>Users will add plugins to the project <code>devDependencies</code> and configure them using the <code>plugins</code> array option.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vitePlugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-feature&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rollupPlugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rollup-plugin-feature&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vitePlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rollupPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Falsy plugins will be ignored, which can be used to easily activate or deactivate plugins.</p><p><code>plugins</code> also accepts presets including several plugins as a single element. This is useful for complex features (like framework integration) that are implemented using several plugins. The array will be flattened internally.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// framework-plugin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frameworkRefresh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-framework-refresh&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frameworkDevtools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-framework-devtools&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> framework</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frameworkRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frameworkDevTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> framework </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-framework&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">framework</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="simple-examples" tabindex="-1">Simple Examples <a class="header-anchor" href="#simple-examples" aria-label="Permalink to &quot;Simple Examples&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>It is common convention to author a Vite/Rollup plugin as a factory function that returns the actual plugin object. The function can accept options which allows users to customize the behavior of the plugin.</p></div><h3 id="transforming-custom-file-types" tabindex="-1">Transforming Custom File Types <a class="header-anchor" href="#transforming-custom-file-types" aria-label="Permalink to &quot;Transforming Custom File Types&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fileRegex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">(my-file-ext)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;transform-file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    transform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fileRegex.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          code: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compileFileToJS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(src),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          map: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// provide source map if available</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="importing-a-virtual-file" tabindex="-1">Importing a Virtual File <a class="header-anchor" href="#importing-a-virtual-file" aria-label="Permalink to &quot;Importing a Virtual File&quot;">​</a></h3><p>See the example in the <a href="#virtual-modules-convention">next section</a>.</p><h2 id="virtual-modules-convention" tabindex="-1">Virtual Modules Convention <a class="header-anchor" href="#virtual-modules-convention" aria-label="Permalink to &quot;Virtual Modules Convention&quot;">​</a></h2><p>Virtual modules are a useful scheme that allows you to pass build time information to the source files using normal ESM import syntax.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> virtualModuleId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;virtual:my-module&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resolvedVirtualModuleId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> virtualModuleId</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-plugin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// required, will show up in warnings and errors</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    resolveId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> virtualModuleId) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolvedVirtualModuleId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolvedVirtualModuleId) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `export const msg = &quot;from virtual module&quot;`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Which allows importing the module in JavaScript:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { msg } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;virtual:my-module&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg)</span></span></code></pre></div><p>Virtual modules in Vite (and Rollup) are prefixed with <code>virtual:</code> for the user-facing path by convention. If possible the plugin name should be used as a namespace to avoid collisions with other plugins in the ecosystem. For example, a <code>vite-plugin-posts</code> could ask users to import a <code>virtual:posts</code> or <code>virtual:posts/helpers</code> virtual modules to get build time information. Internally, plugins that use virtual modules should prefix the module ID with <code>\0</code> while resolving the id, a convention from the rollup ecosystem. This prevents other plugins from trying to process the id (like node resolution), and core features like sourcemaps can use this info to differentiate between virtual modules and regular files. <code>\0</code> is not a permitted char in import URLs so we have to replace them during import analysis. A <code>\0{id}</code> virtual id ends up encoded as <code>/@id/__x00__{id}</code> during dev in the browser. The id will be decoded back before entering the plugins pipeline, so this is not seen by plugins hooks code.</p><p>Note that modules directly derived from a real file, as in the case of a script module in a Single File Component (like a .vue or .svelte SFC) don&#39;t need to follow this convention. SFCs generally generate a set of submodules when processed but the code in these can be mapped back to the filesystem. Using <code>\0</code> for these submodules would prevent sourcemaps from working correctly.</p><h2 id="universal-hooks" tabindex="-1">Universal Hooks <a class="header-anchor" href="#universal-hooks" aria-label="Permalink to &quot;Universal Hooks&quot;">​</a></h2><p>During dev, the Vite dev server creates a plugin container that invokes <a href="https://rollupjs.org/plugin-development/#build-hooks" target="_blank" rel="noreferrer">Rollup Build Hooks</a> the same way Rollup does it.</p><p>The following hooks are called once on server start:</p><ul><li><a href="https://rollupjs.org/plugin-development/#options" target="_blank" rel="noreferrer"><code>options</code></a></li><li><a href="https://rollupjs.org/plugin-development/#buildstart" target="_blank" rel="noreferrer"><code>buildStart</code></a></li></ul><p>The following hooks are called on each incoming module request:</p><ul><li><a href="https://rollupjs.org/plugin-development/#resolveid" target="_blank" rel="noreferrer"><code>resolveId</code></a></li><li><a href="https://rollupjs.org/plugin-development/#load" target="_blank" rel="noreferrer"><code>load</code></a></li><li><a href="https://rollupjs.org/plugin-development/#transform" target="_blank" rel="noreferrer"><code>transform</code></a></li></ul><p>These hooks also have an extended <code>options</code> parameter with additional Vite-specific properties. You can read more in the <a href="/guide/ssr.html#ssr-specific-plugin-logic">SSR documentation</a>.</p><p>Some <code>resolveId</code> calls&#39; <code>importer</code> value may be an absolute path for a generic <code>index.html</code> at root as it&#39;s not always possible to derive the actual importer due to Vite&#39;s unbundled dev server pattern. For imports handled within Vite&#39;s resolve pipeline, the importer can be tracked during the import analysis phase, providing the correct <code>importer</code> value.</p><p>The following hooks are called when the server is closed:</p><ul><li><a href="https://rollupjs.org/plugin-development/#buildend" target="_blank" rel="noreferrer"><code>buildEnd</code></a></li><li><a href="https://rollupjs.org/plugin-development/#closebundle" target="_blank" rel="noreferrer"><code>closeBundle</code></a></li></ul><p>Note that the <a href="https://rollupjs.org/plugin-development/#moduleparsed" target="_blank" rel="noreferrer"><code>moduleParsed</code></a> hook is <strong>not</strong> called during dev, because Vite avoids full AST parses for better performance.</p><p><a href="https://rollupjs.org/plugin-development/#output-generation-hooks" target="_blank" rel="noreferrer">Output Generation Hooks</a> (except <code>closeBundle</code>) are <strong>not</strong> called during dev. You can think of Vite&#39;s dev server as only calling <code>rollup.rollup()</code> without calling <code>bundle.generate()</code>.</p><h2 id="vite-specific-hooks" tabindex="-1">Vite Specific Hooks <a class="header-anchor" href="#vite-specific-hooks" aria-label="Permalink to &quot;Vite Specific Hooks&quot;">​</a></h2><p>Vite plugins can also provide hooks that serve Vite-specific purposes. These hooks are ignored by Rollup.</p><h3 id="config" tabindex="-1"><code>config</code> <a class="header-anchor" href="#config" aria-label="Permalink to &quot;`config`&quot;">​</a></h3><ul><li><p><strong>Type:</strong> <code>(config: UserConfig, env: { mode: string, command: string }) =&gt; UserConfig | null | void</code></p></li><li><p><strong>Kind:</strong> <code>async</code>, <code>sequential</code></p><p>Modify Vite config before it&#39;s resolved. The hook receives the raw user config (CLI options merged with config file) and the current config env which exposes the <code>mode</code> and <code>command</code> being used. It can return a partial config object that will be deeply merged into existing config, or directly mutate the config (if the default merging cannot achieve the desired result).</p><p><strong>Example:</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// return partial config (recommended)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> partialConfigPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;return-partial&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      alias: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// mutate the config directly (use only when merging doesn&#39;t work)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mutateConfigPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mutate-config&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;build&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      config.root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;foo&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Note</p><p>User plugins are resolved before running this hook so injecting other plugins inside the <code>config</code> hook will have no effect.</p></div></li></ul><h3 id="configresolved" tabindex="-1"><code>configResolved</code> <a class="header-anchor" href="#configresolved" aria-label="Permalink to &quot;`configResolved`&quot;">​</a></h3><ul><li><p><strong>Type:</strong> <code>(config: ResolvedConfig) =&gt; void | Promise&lt;void&gt;</code></p></li><li><p><strong>Kind:</strong> <code>async</code>, <code>parallel</code></p><p>Called after the Vite config is resolved. Use this hook to read and store the final resolved config. It is also useful when the plugin needs to do something different based on the command being run.</p><p><strong>Example:</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> examplePlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;read-config&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    configResolved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolvedConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // store the resolved config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolvedConfig</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // use stored config in other hooks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    transform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (config.command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;serve&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // dev: plugin invoked by dev server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // build: plugin invoked by Rollup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Note that the <code>command</code> value is <code>serve</code> in dev (in the cli <code>vite</code>, <code>vite dev</code>, and <code>vite serve</code> are aliases).</p></li></ul><h3 id="configureserver" tabindex="-1"><code>configureServer</code> <a class="header-anchor" href="#configureserver" aria-label="Permalink to &quot;`configureServer`&quot;">​</a></h3><ul><li><p><strong>Type:</strong> <code>(server: ViteDevServer) =&gt; (() =&gt; void) | void | Promise&lt;(() =&gt; void) | void&gt;</code></p></li><li><p><strong>Kind:</strong> <code>async</code>, <code>sequential</code></p></li><li><p><strong>See also:</strong> <a href="./api-javascript.html#vitedevserver">ViteDevServer</a></p><p>Hook for configuring the dev server. The most common use case is adding custom middlewares to the internal <a href="https://github.com/senchalabs/connect" target="_blank" rel="noreferrer">connect</a> app:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;configure-server&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server.middlewares.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // custom handle request...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>Injecting Post Middleware</strong></p><p>The <code>configureServer</code> hook is called before internal middlewares are installed, so the custom middlewares will run before internal middlewares by default. If you want to inject a middleware <strong>after</strong> internal middlewares, you can return a function from <code>configureServer</code>, which will be called after internal middlewares are installed:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;configure-server&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // return a post hook that is called after internal middlewares are</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // installed</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      server.middlewares.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // custom handle request...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>Storing Server Access</strong></p><p>In some cases, other plugin hooks may need access to the dev server instance (e.g. accessing the web socket server, the file system watcher, or the module graph). This hook can also be used to store the server instance for access in other hooks:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;configure-server&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _server</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    transform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (server) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // use server...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Note <code>configureServer</code> is not called when running the production build so your other hooks need to guard against its absence.</p></li></ul><h3 id="configurepreviewserver" tabindex="-1"><code>configurePreviewServer</code> <a class="header-anchor" href="#configurepreviewserver" aria-label="Permalink to &quot;`configurePreviewServer`&quot;">​</a></h3><ul><li><p><strong>Type:</strong> <code>(server: PreviewServer) =&gt; (() =&gt; void) | void | Promise&lt;(() =&gt; void) | void&gt;</code></p></li><li><p><strong>Kind:</strong> <code>async</code>, <code>sequential</code></p></li><li><p><strong>See also:</strong> <a href="./api-javascript.html#previewserver">PreviewServer</a></p><p>Same as <a href="/guide/api-plugin.html#configureserver"><code>configureServer</code></a> but for the preview server. Similarly to <code>configureServer</code>, the <code>configurePreviewServer</code> hook is called before other middlewares are installed. If you want to inject a middleware <strong>after</strong> other middlewares, you can return a function from <code>configurePreviewServer</code>, which will be called after internal middlewares are installed:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;configure-preview-server&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  configurePreviewServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // return a post hook that is called after other middlewares are</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // installed</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      server.middlewares.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // custom handle request...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li></ul><h3 id="transformindexhtml" tabindex="-1"><code>transformIndexHtml</code> <a class="header-anchor" href="#transformindexhtml" aria-label="Permalink to &quot;`transformIndexHtml`&quot;">​</a></h3><ul><li><p><strong>Type:</strong> <code>IndexHtmlTransformHook | { order?: &#39;pre&#39; | &#39;post&#39;, handler: IndexHtmlTransformHook }</code></p></li><li><p><strong>Kind:</strong> <code>async</code>, <code>sequential</code></p><p>Dedicated hook for transforming HTML entry point files such as <code>index.html</code>. The hook receives the current HTML string and a transform context. The context exposes the <a href="./api-javascript.html#vitedevserver"><code>ViteDevServer</code></a> instance during dev, and exposes the Rollup output bundle during build.</p><p>The hook can be async and can return one of the following:</p><ul><li>Transformed HTML string</li><li>An array of tag descriptor objects (<code>{ tag, attrs, children }</code>) to inject to the existing HTML. Each tag can also specify where it should be injected to (default is prepending to <code>&lt;head&gt;</code>)</li><li>An object containing both as <code>{ html, tags }</code></li></ul><p>By default <code>order</code> is <code>undefined</code>, with this hook applied after the HTML has been transformed. In order to inject a script that should go through the Vite plugins pipeline, <code>order: &#39;pre&#39;</code> will apply the hook before processing the HTML. <code>order: &#39;post&#39;</code> applies the hook after all hooks with <code>order</code> undefined are applied.</p><p><strong>Basic Example:</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> htmlPlugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;html-transform&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    transformIndexHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> html.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">&lt;title&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">)&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">title&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        `&lt;title&gt;Title replaced!&lt;/title&gt;`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Full Hook Signature:</strong></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IndexHtmlTransformHook</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ViteDevServer</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    bundle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rollup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OutputBundle</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rollup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OutputChunk</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IndexHtmlTransformResult</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IndexHtmlTransformResult</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IndexHtmlTransformResult</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlTagDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      tags</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlTagDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlTagDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  attrs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HtmlTagDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * default: &#39;head-prepend&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  injectTo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;head&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;body&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;head-prepend&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;body-prepend&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h3 id="handlehotupdate" tabindex="-1"><code>handleHotUpdate</code> <a class="header-anchor" href="#handlehotupdate" aria-label="Permalink to &quot;`handleHotUpdate`&quot;">​</a></h3><ul><li><p><strong>Type:</strong> <code>(ctx: HmrContext) =&gt; Array&lt;ModuleNode&gt; | void | Promise&lt;Array&lt;ModuleNode&gt; | void&gt;</code></p><p>Perform custom HMR update handling. The hook receives a context object with the following signature:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HmrContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  timestamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ModuleNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  read</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ViteDevServer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><p><code>modules</code> is an array of modules that are affected by the changed file. It&#39;s an array because a single file may map to multiple served modules (e.g. Vue SFCs).</p></li><li><p><code>read</code> is an async read function that returns the content of the file. This is provided because on some systems, the file change callback may fire too fast before the editor finishes updating the file and direct <code>fs.readFile</code> will return empty content. The read function passed in normalizes this behavior.</p></li></ul><p>The hook can choose to:</p><ul><li><p>Filter and narrow down the affected module list so that the HMR is more accurate.</p></li><li><p>Return an empty array and perform complete custom HMR handling by sending custom events to the client:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleHotUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ server }) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server.ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;custom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    event: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;special-update&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Client code should register corresponding handler using the <a href="./api-hmr.html">HMR API</a> (this could be injected by the same plugin&#39;s <code>transform</code> hook):</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;special-update&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // perform custom update</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul></li></ul><h2 id="plugin-ordering" tabindex="-1">Plugin Ordering <a class="header-anchor" href="#plugin-ordering" aria-label="Permalink to &quot;Plugin Ordering&quot;">​</a></h2><p>A Vite plugin can additionally specify an <code>enforce</code> property (similar to webpack loaders) to adjust its application order. The value of <code>enforce</code> can be either <code>&quot;pre&quot;</code> or <code>&quot;post&quot;</code>. The resolved plugins will be in the following order:</p><ul><li>Alias</li><li>User plugins with <code>enforce: &#39;pre&#39;</code></li><li>Vite core plugins</li><li>User plugins without enforce value</li><li>Vite build plugins</li><li>User plugins with <code>enforce: &#39;post&#39;</code></li><li>Vite post build plugins (minify, manifest, reporting)</li></ul><h2 id="conditional-application" tabindex="-1">Conditional Application <a class="header-anchor" href="#conditional-application" aria-label="Permalink to &quot;Conditional Application&quot;">​</a></h2><p>By default plugins are invoked for both serve and build. In cases where a plugin needs to be conditionally applied only during serve or build, use the <code>apply</code> property to only invoke them during <code>&#39;build&#39;</code> or <code>&#39;serve&#39;</code>:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;build-only&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;build&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// or &#39;serve&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>A function can also be used for more precise control:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config, { command }) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // apply only on build but not for SSR</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;build&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.build.ssr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="rollup-plugin-compatibility" tabindex="-1">Rollup Plugin Compatibility <a class="header-anchor" href="#rollup-plugin-compatibility" aria-label="Permalink to &quot;Rollup Plugin Compatibility&quot;">​</a></h2><p>A fair number of Rollup plugins will work directly as a Vite plugin (e.g. <code>@rollup/plugin-alias</code> or <code>@rollup/plugin-json</code>), but not all of them, since some plugin hooks do not make sense in an unbundled dev server context.</p><p>In general, as long as a Rollup plugin fits the following criteria then it should just work as a Vite plugin:</p><ul><li>It doesn&#39;t use the <a href="https://rollupjs.org/plugin-development/#moduleparsed" target="_blank" rel="noreferrer"><code>moduleParsed</code></a> hook.</li><li>It doesn&#39;t have strong coupling between bundle-phase hooks and output-phase hooks.</li></ul><p>If a Rollup plugin only makes sense for the build phase, then it can be specified under <code>build.rollupOptions.plugins</code> instead. It will work the same as a Vite plugin with <code>enforce: &#39;post&#39;</code> and <code>apply: &#39;build&#39;</code>.</p><p>You can also augment an existing Rollup plugin with Vite-only properties:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rollup-plugin-example&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      ...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">example</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      enforce: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;build&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Check out <a href="https://vite-rollup-plugins.patak.dev" target="_blank" rel="noreferrer">Vite Rollup Plugins</a> for a list of compatible official Rollup plugins with usage instructions.</p><h2 id="path-normalization" tabindex="-1">Path Normalization <a class="header-anchor" href="#path-normalization" aria-label="Permalink to &quot;Path Normalization&quot;">​</a></h2><p>Vite normalizes paths while resolving ids to use POSIX separators ( / ) while preserving the volume in Windows. On the other hand, Rollup keeps resolved paths untouched by default, so resolved ids have win32 separators ( \ ) in Windows. However, Rollup plugins use a <a href="https://github.com/rollup/plugins/tree/master/packages/pluginutils#normalizepath" target="_blank" rel="noreferrer"><code>normalizePath</code> utility function</a> from <code>@rollup/pluginutils</code> internally, which converts separators to POSIX before performing comparisons. This means that when these plugins are used in Vite, the <code>include</code> and <code>exclude</code> config pattern and other similar paths against resolved ids comparisons work correctly.</p><p>So, for Vite plugins, when comparing paths against resolved ids it is important to first normalize the paths to use POSIX separators. An equivalent <code>normalizePath</code> utility function is exported from the <code>vite</code> module.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { normalizePath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalizePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;foo/bar&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalizePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo/bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;foo/bar&#39;</span></span></code></pre></div><h2 id="filtering-include-exclude-pattern" tabindex="-1">Filtering, include/exclude pattern <a class="header-anchor" href="#filtering-include-exclude-pattern" aria-label="Permalink to &quot;Filtering, include/exclude pattern&quot;">​</a></h2><p>Vite exposes <a href="https://github.com/rollup/plugins/tree/master/packages/pluginutils#createfilter" target="_blank" rel="noreferrer"><code>@rollup/pluginutils</code>&#39;s <code>createFilter</code></a> function to encourage Vite specific plugins and integrations to use the standard include/exclude filtering pattern, which is also used in Vite core itself.</p><h2 id="client-server-communication" tabindex="-1">Client-server Communication <a class="header-anchor" href="#client-server-communication" aria-label="Permalink to &quot;Client-server Communication&quot;">​</a></h2><p>Since Vite 2.9, we provide some utilities for plugins to help handle the communication with clients.</p><h3 id="server-to-client" tabindex="-1">Server to Client <a class="header-anchor" href="#server-to-client" aria-label="Permalink to &quot;Server to Client&quot;">​</a></h3><p>On the plugin side, we could use <code>server.ws.send</code> to broadcast events to all the clients:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Example: wait for a client to connect before sending a message</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        server.ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;connection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          server.ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my:greetings&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { msg: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>We recommend <strong>always prefixing</strong> your event names to avoid collisions with other plugins.</p></div><p>On the client side, use <a href="/guide/api-hmr.html#hot-on-event-cb"><code>hot.on</code></a> to listen to the events:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// client side</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my:greetings&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.msg) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// hello</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="client-to-server" tabindex="-1">Client to Server <a class="header-anchor" href="#client-to-server" aria-label="Permalink to &quot;Client to Server&quot;">​</a></h3><p>To send events from the client to the server, we can use <a href="/guide/api-hmr.html#hot-send-event-payload"><code>hot.send</code></a>:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// client side</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my:from-client&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { msg: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hey!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Then use <code>server.ws.on</code> and listen to the events on the server side:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      configureServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        server.ws.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my:from-client&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Message from client:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data.msg) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hey!</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // reply only to the client (if needed)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my:ack&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { msg: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hi! I got your message!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="typescript-for-custom-events" tabindex="-1">TypeScript for Custom Events <a class="header-anchor" href="#typescript-for-custom-events" aria-label="Permalink to &quot;TypeScript for Custom Events&quot;">​</a></h3><p>It is possible to type custom events by extending the <code>CustomEventMap</code> interface:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// events.d.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite/types/customEvent&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite/types/customEvent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomEventMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;custom:foo&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // &#39;event-key&#39;: payload</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-271031cd data-v-11c7b4f5><!--[--><!--]--><div class="edit-info" data-v-11c7b4f5><div class="edit-link" data-v-11c7b4f5><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/vitejs/vite/edit/main/docs/guide/api-plugin.md" target="_blank" rel="noreferrer" data-v-11c7b4f5><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-11c7b4f5><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Suggest changes to this page<!--]--></a></div><!----></div><nav class="prev-next" data-v-11c7b4f5><div class="pager" data-v-11c7b4f5><a class="VPLink link pager-link prev" href="/guide/migration.html" data-v-11c7b4f5><!--[--><span class="desc" data-v-11c7b4f5>Previous page</span><span class="title" data-v-11c7b4f5>Migration from v4</span><!--]--></a></div><div class="pager" data-v-11c7b4f5><a class="VPLink link pager-link next" href="/guide/api-hmr.html" data-v-11c7b4f5><!--[--><span class="desc" data-v-11c7b4f5>Next page</span><span class="title" data-v-11c7b4f5>HMR API</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-bc64b1fc data-v-9d24405e><div class="container" data-v-9d24405e><p class="message" data-v-9d24405e>Released under the MIT License. (dev)</p><p class="copyright" data-v-9d24405e>Copyright © 2019-present Evan You & Vite Contributors</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_announcing-vite2.md\":\"9gNMHQV3\",\"blog.md\":\"6FWJeB1_\",\"config_worker-options.md\":\"ePbCFGom\",\"blog_announcing-vite4-3.md\":\"8XRGNgli\",\"guide_backend-integration.md\":\"TAeXEtEu\",\"config_preview-options.md\":\"9ap6eOyZ\",\"guide_env-and-mode.md\":\"S1mZp9aL\",\"blog_announcing-vite5.md\":\"3yOty1E1\",\"guide_philosophy.md\":\"nEgWRcYx\",\"guide_dep-pre-bundling.md\":\"PUWVrVN1\",\"plugins_index.md\":\"DBFo4Gi7\",\"releases.md\":\"by5xNEWv\",\"guide_static-deploy.md\":\"PsFxussq\",\"config_build-options.md\":\"vj5iyyoM\",\"guide_index.md\":\"8a4oqZth\",\"guide_migration.md\":\"fOkvjlyF\",\"guide_assets.md\":\"12W2twvs\",\"config_dep-optimization-options.md\":\"8ve65POh\",\"blog_announcing-vite3.md\":\"yUqN8vSK\",\"index.md\":\"fqD8VCc0\",\"guide_api-hmr.md\":\"MgwkRXE7\",\"guide_why.md\":\"JeTXsDek\",\"config_index.md\":\"3DhKESrj\",\"guide_troubleshooting.md\":\"oVC-1XkB\",\"guide_cli.md\":\"y0BH6cJf\",\"guide_ssr.md\":\"aZ3txCC6\",\"guide_comparisons.md\":\"QN9zjvIp\",\"guide_performance.md\":\"IOrMDq-Z\",\"config_ssr-options.md\":\"zJahbRaD\",\"config_server-options.md\":\"FwwbRg10\",\"blog_announcing-vite4.md\":\"00lslJyA\",\"guide_using-plugins.md\":\"di4hUDF5\",\"team.md\":\"vNzrPRv2\",\"config_shared-options.md\":\"Xtm7WxHS\",\"guide_build.md\":\"RE4VAl2O\",\"guide_api-javascript.md\":\"vl8yl11L\",\"guide_features.md\":\"nkyhqaV1\",\"guide_api-plugin.md\":\"3fQa_tjH\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Vite (local)\",\"description\":\"Next Generation Frontend Tooling\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"editLink\":{\"pattern\":\"https://github.com/vitejs/vite/edit/main/docs/:path\",\"text\":\"Suggest changes to this page\"},\"socialLinks\":[{\"icon\":\"mastodon\",\"link\":\"https://elk.zone/m.webtoo.ls/@vite\"},{\"icon\":\"twitter\",\"link\":\"https://twitter.com/vite_js\"},{\"icon\":\"discord\",\"link\":\"https://chat.vitejs.dev\"},{\"icon\":\"github\",\"link\":\"https://github.com/vitejs/vite\"}],\"algolia\":{\"appId\":\"7H67QR5P0A\",\"apiKey\":\"deaab78bcdfe96b599497d25acc6460e\",\"indexName\":\"vitejs\",\"searchParameters\":{\"facetFilters\":[\"tags:en\"]}},\"carbonAds\":{\"code\":\"CEBIEK3N\",\"placement\":\"vitejsdev\"},\"footer\":{\"message\":\"Released under the MIT License. (dev)\",\"copyright\":\"Copyright © 2019-present Evan You & Vite Contributors\"},\"nav\":[{\"text\":\"Guide\",\"link\":\"/guide/\",\"activeMatch\":\"/guide/\"},{\"text\":\"Config\",\"link\":\"/config/\",\"activeMatch\":\"/config/\"},{\"text\":\"Plugins\",\"link\":\"/plugins/\",\"activeMatch\":\"/plugins/\"},{\"text\":\"Resources\",\"items\":[{\"text\":\"Team\",\"link\":\"/team\"},{\"text\":\"Blog\",\"link\":\"/blog\"},{\"text\":\"Releases\",\"link\":\"/releases\"},{\"items\":[{\"text\":\"Twitter\",\"link\":\"https://twitter.com/vite_js\"},{\"text\":\"Discord Chat\",\"link\":\"https://chat.vitejs.dev\"},{\"text\":\"Awesome Vite\",\"link\":\"https://github.com/vitejs/awesome-vite\"},{\"text\":\"ViteConf\",\"link\":\"https://viteconf.org\"},{\"text\":\"DEV Community\",\"link\":\"https://dev.to/t/vite\"},{\"text\":\"Rollup Plugins Compat\",\"link\":\"https://vite-rollup-plugins.patak.dev/\"},{\"text\":\"Changelog\",\"link\":\"https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md\"},{\"text\":\"Contributing\",\"link\":\"https://github.com/vitejs/vite/blob/main/CONTRIBUTING.md\"}]}]},{\"text\":\"Version\",\"items\":[{\"text\":\"Vite 5 Docs (release)\",\"link\":\"https://vitejs.dev\"},{\"text\":\"Vite 4 Docs\",\"link\":\"https://v4.vitejs.dev\"},{\"text\":\"Vite 3 Docs\",\"link\":\"https://v3.vitejs.dev\"},{\"text\":\"Vite 2 Docs\",\"link\":\"https://v2.vitejs.dev\"}]}],\"sidebar\":{\"/guide/\":[{\"text\":\"Guide\",\"items\":[{\"text\":\"Why Vite\",\"link\":\"/guide/why\"},{\"text\":\"Getting Started\",\"link\":\"/guide/\"},{\"text\":\"Features\",\"link\":\"/guide/features\"},{\"text\":\"CLI\",\"link\":\"/guide/cli\"},{\"text\":\"Using Plugins\",\"link\":\"/guide/using-plugins\"},{\"text\":\"Dependency Pre-Bundling\",\"link\":\"/guide/dep-pre-bundling\"},{\"text\":\"Static Asset Handling\",\"link\":\"/guide/assets\"},{\"text\":\"Building for Production\",\"link\":\"/guide/build\"},{\"text\":\"Deploying a Static Site\",\"link\":\"/guide/static-deploy\"},{\"text\":\"Env Variables and Modes\",\"link\":\"/guide/env-and-mode\"},{\"text\":\"Server-Side Rendering (SSR)\",\"link\":\"/guide/ssr\"},{\"text\":\"Backend Integration\",\"link\":\"/guide/backend-integration\"},{\"text\":\"Comparisons\",\"link\":\"/guide/comparisons\"},{\"text\":\"Troubleshooting\",\"link\":\"/guide/troubleshooting\"},{\"text\":\"Performance\",\"link\":\"/guide/performance\"},{\"text\":\"Philosophy\",\"link\":\"/guide/philosophy\"},{\"text\":\"Migration from v4\",\"link\":\"/guide/migration\"}]},{\"text\":\"APIs\",\"items\":[{\"text\":\"Plugin API\",\"link\":\"/guide/api-plugin\"},{\"text\":\"HMR API\",\"link\":\"/guide/api-hmr\"},{\"text\":\"JavaScript API\",\"link\":\"/guide/api-javascript\"},{\"text\":\"Config Reference\",\"link\":\"/config/\"}]}],\"/config/\":[{\"text\":\"Config\",\"items\":[{\"text\":\"Configuring Vite\",\"link\":\"/config/\"},{\"text\":\"Shared Options\",\"link\":\"/config/shared-options\"},{\"text\":\"Server Options\",\"link\":\"/config/server-options\"},{\"text\":\"Build Options\",\"link\":\"/config/build-options\"},{\"text\":\"Preview Options\",\"link\":\"/config/preview-options\"},{\"text\":\"Dep Optimization Options\",\"link\":\"/config/dep-optimization-options\"},{\"text\":\"SSR Options\",\"link\":\"/config/ssr-options\"},{\"text\":\"Worker Options\",\"link\":\"/config/worker-options\"}]}]},\"outline\":{\"level\":[2,3]}},\"locales\":{\"root\":{\"label\":\"English\"},\"zh\":{\"label\":\"简体中文\",\"link\":\"https://cn.vitejs.dev\"},\"ja\":{\"label\":\"日本語\",\"link\":\"https://ja.vitejs.dev\"},\"es\":{\"label\":\"Español\",\"link\":\"https://es.vitejs.dev\"},\"pt\":{\"label\":\"Português\",\"link\":\"https://pt.vitejs.dev\"},\"ko\":{\"label\":\"한국어\",\"link\":\"https://ko.vitejs.dev\"},\"de\":{\"label\":\"Deutsch\",\"link\":\"https://de.vitejs.dev\"}},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>